!function(){var t=function(t){var e;return function(n){return e||t(e={exports:{},parent:n},e.exports),e.exports}},e=t((function(t,e){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.reRun=void 0;var s,a=r(n({})),o=i({}),u=new Array,c=new a.default,h=document.getElementById("expression"),l=document.getElementById("value"),p=["radius : 23 cm","PI * radius ^ 2","PI2 * radius","log(23)","23 % of 1023","200 sec + 120 %","20 minutes + 34 day in sec","sin(PI)","E","speed = 20 kph","speed in mps"],f=function(){for(var t="",e=0,n=p;e<n.length;e++)t=t+"<div>"+n[e]+"</div><div></br></div>";return t}();function T(t){!function(t){l.innerHTML="";for(var e=!1,n=0;n<t.length;n++){var i=t[n];!e&&s&&s.length>n&&s[n].expression.trim()===i.trim()?(l.appendChild(w(s[n].value)),N(i,s[n].value),g(i)):(e=!0,v(i))}}(E(t)),s=u,u=[]}function E(t){var e=Array();return t.forEach((function(t){t instanceof HTMLElement?"DIV"===t.nodeName?t.childNodes.length>1?function t(e,n){n.getElementsByTagName("div").length>0?function(e,n){n.forEach((function(n){n instanceof HTMLElement?"DIV"===n.nodeName?t(e,n):"SPAN"===n.nodeName&&e.push(m(n)):n instanceof Text&&e.push(n.data)}))}(e,n.childNodes):e.push(m(n))}(e,t):e.push(m(t)):e.push(""):t instanceof Text?e.push(t.data):e.push("")})),e}function d(t){var e=document.createElement("div");return t?e.innerText=t:e.appendChild(document.createElement("br")),e}function m(t){return t.textContent?t.textContent:""}function g(t){for(var e=Math.ceil(t.length/41),n=2;n<=e;n++)l.append(w())}function N(t,e){u.push({expression:t,value:e})}function v(t){if(t.trim().length>0){var e=function(t){return function(t){if(0===t.trim().length)return"";try{return t=t.trim().replace(new RegExp(String.fromCharCode(160),"g")," "),c.evaluate(t.trim()).toString()}catch(e){return e instanceof o.FcalError?(console.log(a.default.getTokensForExpression("234234 +\xa0 34234")),console.log("Source: ["+t.trim()+"]"),console.trace(),console.info(e.info())):console.error(e),""}}(t)}(t);N(t,e),l.append(w(e))}else N(t,""),l.append(w());g(t)}function w(t){var e=document.createElement("div"),n=function(){var t=document.createElement("p");return t.style.marginTop="0px",t.style.height="19px",t.style.marginBottom="0px",t}();return t&&(n.textContent=t),e.appendChild(n),e.classList.add("ResultUnit"),e}function y(){if(h.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(h),t.collapse(!1);var e=window.getSelection();null==e||e.removeAllRanges(),null==e||e.addRange(t)}}["change","paste","input"].forEach((function(t){h.addEventListener(t,(function(){var t=this.childNodes;localStorage.setItem(S.localStorageKeyExpr,this.innerHTML),T(t)}))})),h.addEventListener("keydown",(function(t){t.ctrlKey&&67!==t.keyCode&&65!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode&&90!==t.keyCode&&89!==t.keyCode&&t.preventDefault(),t.ctrlKey&&86===t.keyCode&&setTimeout((function(){!function(t){h.innerHTML="";for(var e=0,n=t;e<n.length;e++){var i=n[e];h.append(0==(r=i).length?d(null):d(r))}var r}(E(h.childNodes)),y()}),0)})),document.addEventListener("DOMContentLoaded",(function(){var t=localStorage.getItem(S.localStorageKeyExpr);t||(t=localStorage.getItem(S.exampleOffKey)?"":f,localStorage.setItem(S.localStorageKeyExpr,t)),h.innerHTML=t,localStorage.setItem(S.exampleOffKey,"true"),T(h.childNodes),y()})),e.reRun=function(){T(h.childNodes)}})),n=t((function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,s=i({}),a=e({}),o=new s.Decimal(1);function u(t,e,n){return new s.Unit("CURRENCY",function(t,e){return o.div(new s.Decimal(t[e]))}(t,e),e,n)}function c(t){console.info("Setting currency units to fcal");var e=t.rates;s.Fcal.UseUnit(u(e,"USD",["USD","$"])),s.Fcal.UseUnit(u(e,"CAD",["CAD"])),s.Fcal.UseUnit(u(e,"HKD",["HKD"])),s.Fcal.UseUnit(u(e,"ISK",["ISK"])),s.Fcal.UseUnit(u(e,"PHP",["PHP","\u20b1"])),s.Fcal.UseUnit(u(e,"DKK",["DKK"])),s.Fcal.UseUnit(u(e,"HUF",["HUF"])),s.Fcal.UseUnit(u(e,"CZK",["CZK"])),s.Fcal.UseUnit(u(e,"GBP",["GBP","\xa3"])),s.Fcal.UseUnit(u(e,"RON",["RON"])),s.Fcal.UseUnit(u(e,"SEK",["SEK"])),s.Fcal.UseUnit(u(e,"IDR",["IDR"])),s.Fcal.UseUnit(u(e,"INR",["INR","\u20b9"])),s.Fcal.UseUnit(u(e,"BRL",["BRL"])),s.Fcal.UseUnit(u(e,"RUB",["RUB"])),s.Fcal.UseUnit(u(e,"HRK",["HRK"])),s.Fcal.UseUnit(u(e,"JPY",["JPY"])),s.Fcal.UseUnit(u(e,"THB",["THB"])),s.Fcal.UseUnit(u(e,"CHF",["CHF"])),s.Fcal.UseUnit(u(e,"EUR",["EUR","\u20ac"])),s.Fcal.UseUnit(u(e,"MYR",["MYR","RM"])),s.Fcal.UseUnit(u(e,"BGN",["BGN","\u043b\u0432"])),s.Fcal.UseUnit(u(e,"TRY",["TRY"])),s.Fcal.UseUnit(u(e,"CNY",["CNY","\xa5"])),s.Fcal.UseUnit(u(e,"NOK",["NOK"])),s.Fcal.UseUnit(u(e,"NZD",["NZD"])),s.Fcal.UseUnit(u(e,"ZAR",["ZAR"])),s.Fcal.UseUnit(u(e,"MXN",["MXN"])),s.Fcal.UseUnit(u(e,"SGD",["SGD"])),s.Fcal.UseUnit(u(e,"AUD",["AUD"])),s.Fcal.UseUnit(u(e,"ILS",["ILS"])),s.Fcal.UseUnit(u(e,"KRW",["KRW"])),s.Fcal.UseUnit(u(e,"PLN",["PLN"]))}(r=P.getER())instanceof Promise?r.then((function(t){console.log(t),c(t),console.info("Re-running the fcal eval"),a.reRun()}),(function(t){alert("Could not get currency rates, so currency conversion is disabled.\nCheck your internet connection"),console.error(t)})):c(r),n.default=s.Fcal})),i=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decimal=y.Decimal;const n=v({}),i=m({}),c=d({}),l=E({}),p=T({});p.Environment;const f=u({}),U=o({});U.FcalFunction;const A=a({}),b=N({}),L=s({}),S=w({});S.Type;const P=r({}),_=g({});e.Unit=_.Unit;const I=h({});class D{constructor(){this.lst=new b.SymbolTable(D.gst),this.strict=!1,this.environment=new p.Environment(D.functions,this.lst,D.constants)}static eval(t){return(new D).evaluate(t)}static UseFunctions(t){for(const e of t)this.UseFunction(e)}static UseFunction(t){D.gst.set(t.name,b.Entity.FUNCTION),t instanceof U.FcalFunction?this.functions.push(t):this.functions.push(new U.FcalFunction(t.name,t.arity,t.func))}static UseUnits(t){for(const e of t)this.UseUnit(e)}static UseUnit(t){if(t instanceof _.Unit)return this.units.push(t);const e=new _.Unit(t.id,t.ratio,t.type,t.phrases);t.bias&&e.setBias(t.bias),t.plural&&e.Plural(t.plural),t.singular&&e.Singular(t.singular),this.units.push(e)}static getUnit(t){return this.units.get(t)}static useConstants(t){this.constants.use(t)}static useScales(t){this.scales.use(t)}static useConverter(t,e){this.converters.set(t,e)}static getUnits(){return this.units}static getConstants(){return this.constants}static getFunctions(){return this.functions}static getScales(){return this.scales}static getConverters(){return this.converters}static getTokensForExpression(t){return new I.Lexer(t,this.phrases,this.units,this.converters,this.scales).getTokens()}static initialize(){this.gst||(this.gst=new b.SymbolTable),this.phrases||(this.phrases=this.getDefaultPhrases()),this.units||(this.units=new _.Unit.List(D.gst),this.setDefaultUnits()),this.functions||(this.functions=new U.FcalFunction.List,this.setDefaultFunctions()),this.constants||(this.constants=new c.Constant(this.gst),this.setDefaultConstants()),this.converters||(this.converters=new l.Converter(this.gst),this.setDefaultConverter()),this.scales||(this.scales=new A.Scale(this.gst),this.setDefaultScales())}static getDefaultPhrases(){const t=new P.Phrases(this.gst);return t.push(x.TT.PLUS,["PLUS","WITH","ADD"]),t.push(x.TT.MINUS,["MINUS","SUBTRACT","WITHOUT"]),t.push(x.TT.TIMES,["TIMES","MULTIPLIEDBY","mul"]),t.push(x.TT.SLASH,["DIVIDE","DIVIDEBY"]),t.push(x.TT.CAP,["POW"]),t.push(x.TT.MOD,["mod"]),t.push(x.TT.OF,["of"]),t.push(x.TT.IN,["in","as","to"]),t.push(x.TT.AND,["and"]),t.push(x.TT.OR,["or"]),t.push(x.TT.NOT,["not"]),t}static setDefaultFunctions(){this.UseFunctions(n.getDefaultFunctions())}static setDefaultUnits(){this.UseUnits(i.getDefaultUnits())}static setDefaultConstants(){this.useConstants({E:S.Type.BNumber.New("2.718281828459045235360287"),PI:S.Type.BNumber.New("3.141592653589793238462645"),PI2:S.Type.BNumber.New("6.2831853071795864769"),false:S.Type.FcalBoolean.FALSE,true:S.Type.FcalBoolean.TRUE})}static setDefaultScales(){this.useScales({k:1e3,M:1e6,B:1e7,thousand:1e3,million:1e6,billion:1e7})}static setDefaultConverter(){const t=t=>S.Type.BNumber.New(t.n),e=t=>S.Type.Percentage.New(t.n);this.useConverter("number",t),this.useConverter("num",t),this.useConverter("percentage",e),this.useConverter("percent",e)}evaluate(t){return t=R(t),this.rawEvaluate(t)}rawEvaluate(t){return new f.Evaluator(t,D.phrases,D.units,this.environment,D.converters,D.scales,this.strict).evaluateExpression()}expression(t){const e=new b.SymbolTable(this.lst),n=new p.Environment(D.functions,e,D.constants);return n.values=new Map(this.environment.values),t=R(t),new O(new f.Evaluator(t,D.phrases,D.units,n,D.converters,D.scales,this.strict))}expressionSync(t){return t=R(t),new O(new f.Evaluator(t,D.phrases,D.units,this.environment,D.converters,D.scales,this.strict))}setValues(t){this.environment.use(t)}getEnvironment(){return this.environment}fromJSON(t){const e=new L.JSONParser(t,D.units,D.converters),n=new b.SymbolTable(this.lst),i=new p.Environment(D.functions,n,D.constants);return i.values=new Map(this.environment.values),t=R(t),new O(new f.Evaluator(e.parse(),D.phrases,D.units,i,D.converters,D.scales,this.strict))}setStrict(t){this.strict=t}}function R(t){return t.endsWith("\n")?t:t+"\n"}e.Fcal=D;class O{constructor(t){this.evaluator=t}evaluate(){return this.evaluator.evaluateExpression()}setValues(t){this.evaluator.environment.use(t)}getValues(){return this.evaluator.environment}getAST(){return this.evaluator.getAST()}toJSON(){return this.evaluator.toJSON()}toObj(){return this.evaluator.toObj()}getScannedTokens(){return this.evaluator.getScannedTokens()}toString(){return this.getAST()}}class M extends Error{constructor(t,e,n){super(t),this.start=e,this.end=n,this.message=t,e?(n||(this.end=e),this.name=`FcalError [${this.start}, ${this.end}]`):this.name="FcalError"}static mark(t,e){return"^".repeat(t===e?1:e-t).padStart(e,".")}info(){const t=Array();return t.push(`err: ${this.message}\n`),void 0!==this.source&&void 0!==this.start&&void 0!==this.end&&(t.push("| "+this.source),t.push(`| ${M.mark(this.start,this.end)}\n`)),t.join("")}}e.FcalError=M,D.initialize()})),r=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=N({});e.Phrases=class{constructor(t){this.symbolTable=t,this.phrases=new Map}push(t,e){for(const i of e)this.symbolTable.set(i.toUpperCase(),n.Entity.OPERATION_PHRASE),this.phrases.set(i.toUpperCase(),t)}get(t){return this.phrases.get(t.toUpperCase())}}})),s=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i({}),r=l({}),s=w({}),a=f({});e.JSONParser=class{constructor(t,e,n){this.units=e,this.c=n,this.ast=JSON.parse(t)}parse(){return this.createExpr(this.ast)}createExpr(t){switch(t.type){case a.JSON_TYPES.BINARY:if(t.right&&t.left&&t.operator){const e=this.createExpr(t.left),n=this.createExpr(t.right);return new r.Expr.Binary(e,t.operator,n,t.start,t.end)}break;case a.JSON_TYPES.GROUP:if(t.value&&"string"!=typeof t.value){const e=this.createExpr(t.value);return new r.Expr.Grouping(e,t.start,t.end)}break;case a.JSON_TYPES.LITERAL:if(t.value&&"string"==typeof t.value)return new r.Expr.Literal(new s.Type.BNumber(t.value),t.start,t.end);break;case a.JSON_TYPES.UNARY:if(t.operator&&t.value&&"string"!=typeof t.value){const e=this.createExpr(t.value);return new r.Expr.Unary(t.operator,e,t.start,t.end)}break;case a.JSON_TYPES.PERCENTAGE:if(t.value&&"string"!=typeof t.value){const e=this.createExpr(t.value);return new r.Expr.Percentage(e,t.start,t.end)}break;case a.JSON_TYPES.UNIT:if(t.phrase&&t.value&&"string"!=typeof t.value){const e=this.units.get(t.phrase);if(e){const n=this.createExpr(t.value);return new r.Expr.UnitExpr(n,t.phrase,e,t.start,t.end)}}break;case a.JSON_TYPES.CONVERSION:if(t.value&&"string"!=typeof t.value){const e=this.createExpr(t.value);if(t.unit){const n=this.units.get(t.unit);if(n)return new r.Expr.ConversionExpr(e,n,t.unit,t.start,t.end)}if(t.ns){const n=U.NumberSystem.get(t.ns);if(n)return new r.Expr.ConversionExpr(e,n,t.ns,t.start,t.end)}if(t.converter){const n=this.c.get(t.converter);if(n)return new r.Expr.ConversionExpr(e,n,t.converter,t.start,t.end)}}break;case a.JSON_TYPES.ASSIGN:if(t.value&&"string"!=typeof t.value){const e=this.createExpr(t.value);if(t.variable)return new r.Expr.Assign(t.variable,e,t.start,t.end)}break;case a.JSON_TYPES.VARIABLE:if(t.name)return new r.Expr.Variable(t.name,t.start,t.end);break;case a.JSON_TYPES.CALL:if(t.name){const e=Array();if(t.args){for(const n of t.args)e.push(this.createExpr(n));return new r.Expr.Call(t.name,e,t.start,t.end)}}break;case a.JSON_TYPES.LOGICAL:if(t.right&&t.left&&t.operator){const e=this.createExpr(t.left),n=this.createExpr(t.right);return new r.Expr.Logical(e,t.operator,n,t.start,t.end)}break;case a.JSON_TYPES.TERNARY:if(t.main&&t.trueExpr&&t.falseExpr){const e=this.createExpr(t.main),n=this.createExpr(t.trueExpr),i=this.createExpr(t.falseExpr);return new r.Expr.Ternary(e,n,i,t.start,t.end)}}throw new n.FcalError("Invalid JSON "+t)}}})),a=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=w({}),i=N({});e.Scale=class{constructor(t){this.values=new Map,this.symbolTable=t}get(t){return this.values.get(t)}set(t,e){this.symbolTable.set(t,i.Entity.SCALE),e instanceof n.Type?this.values.set(t,e):this.values.set(t,n.Type.BNumber.New(e))}use(t){if(t instanceof Map)t.forEach((t,e)=>{this.set(e,t)});else for(const e in t)if(t.hasOwnProperty(e)){const n=t[e];this.set(e,n)}}}})),o=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i({}),r=w({});class s{constructor(t,e,n){this.arity=e,this.function=n,this.name=t}call(t,e){const i=this.function(t,e);if(!i)return r.Type.BNumber.New(0);if("number"==typeof i||i instanceof y.Decimal)return r.Type.BNumber.New(i);if(!(i instanceof r.Type))throw new n.FcalError(`${this.name} Function Invalid return type,  Expecting Fcal.Type but got ${typeof i}`);return i}}e.FcalFunction=s,function(t){t.List=class{constructor(){this.functions=new Map}push(t){if(t.arity<-1)throw new n.FcalError(`Can not register ${t.name}, arity should be greater than or equal to -1 but got ${t.arity}`);if(t.arity>=255)throw new n.FcalError(`Can not register ${t.name}, function cannot have more than 254 arguments`);if(t.arity%1!=0)throw new n.FcalError(`Can not register ${t.name}, arity should be Integer`);this.functions.set(t.name,t)}call(t,e,i){const r=this.get(t);if(r)return r.function(e,i);throw new n.FcalError(`Function ${t} is not found`)}get(t){return this.functions.get(t)}}}(s||(s={})),e.FcalFunction=s})),u=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i({}),r=f({}),s=c({}),a=w({}),o=g({});e.Evaluator=class{constructor(t,e,n,i,r,a,o){if(this.environment=i,this.strict=o,"string"==typeof t){const o=new s.Parser(t,e,n,r,a,i.symbolTable);return this.parser=o,this.ast=o.parse(),void(this.source=t)}this.ast=t}getAST(){return this.ast.toString()}toJSON(){return new r.ToJSON(this.ast).toJSON()}toObj(){return new r.ToJSON(this.ast).toObj()}getScannedTokens(){var t;return null===(t=this.parser)||void 0===t?void 0:t.getScannedTokens()}visitCallExpr(t){const e=t.name;let i;if(i=this.environment.functions.get(e)){if(-1!==i.arity&&i.arity!==t.argument.length)throw new n.FcalError(`function ${e} expected ${i.arity} args but got ${t.argument.length}`,t.start,t.end);const r=Array();for(const e of t.argument)r.push(this.evaluate(e));return i.call(this.environment,r)}throw new n.FcalError(e+" is not callable",t.start,t.end)}visitAssignExpr(t){const e=this.evaluate(t.value);return this.environment.set(t.name,e),e}visitVariableExpr(t){return this.environment.get(t.name,t.start,t.end)}evaluateExpression(){try{const t=this.evaluate(this.ast);return this.environment.set("_",t),t}catch(t){throw t instanceof n.FcalError&&(t.source=this.source),t}}visitConversionExpr(t){const e=this.evaluate(t.expression);if(e instanceof a.Type.Numeric)return t.to instanceof o.UnitMeta?a.Type.UnitNumber.convertToUnit(e,t.to).setSystem(e.ns):t.to instanceof U.NumberSystem?e.New(e.n).setSystem(t.to):t.to(e);throw new n.FcalError("Expecting numeric value before in",t.start,t.end)}visitUnitExpr(t){const e=this.evaluate(t.expression);if(e instanceof a.Type.Numeric)return a.Type.UnitNumber.New(e.n,t.unit).setSystem(e.ns);throw new n.FcalError("Expecting numeric value before unit",t.start,t.end)}visitTernaryExpr(t){return this.evaluate(t.main).trusty()?this.evaluate(t.trueExpr):this.evaluate(t.falseExpr)}visitLogicalExpr(t){const e=this.evaluate(t.left);return t.operator.type===x.TT.AND?e.trusty()?this.evaluate(t.right):e:e.trusty()?e:this.evaluate(t.right)}visitBinaryExpr(t){const e=this.evaluate(t.left),i=this.evaluate(t.right);switch(this.strict&&this.checkInvalidOperation(t.operator.type,[e,i]),t.operator.type){case x.TT.EQUAL_EQUAL:return e.EQ(i);case x.TT.EQUAL_EQUAL_EQUAL:return new a.Type.FcalBoolean(e.n.eq(i.n));case x.TT.NOT_EQUAL:return e.NEQ(i);case x.TT.NOT_EQUAL_EQUAL:return new a.Type.FcalBoolean(!e.n.eq(i.n));case x.TT.GREATER:return e.GT(i);case x.TT.GREATER_EQUAL:return e.GTE(i);case x.TT.GREATER_EQUAL_EQUAL:return new a.Type.FcalBoolean(e.n.gte(i.n));case x.TT.LESS:return e.LT(i);case x.TT.LESS_EQUAL:return e.LTE(i);case x.TT.LESS_EQUAL_EQUAL:return new a.Type.FcalBoolean(e.n.lte(i.n));case x.TT.PLUS:return e.Add(i);case x.TT.MINUS:return e.Sub(i);case x.TT.TIMES:return e.times(i);case x.TT.FLOOR_DIVIDE:const t=e.divide(i);return t.n=t.n.floor(),t;case x.TT.SLASH:return e.divide(i);case x.TT.MOD:return e.modulo(i);case x.TT.CAP:return e.power(i);case x.TT.OF:if(e instanceof a.Type.FcalBoolean||i instanceof a.Type.FcalBoolean)throw new n.FcalError("Unexpected Boolean in percentage operation");if(e instanceof a.Type.BNumber&&i instanceof a.Type.BNumber||e instanceof a.Type.Percentage&&i instanceof a.Type.Percentage)return new a.Type.Percentage(e.n.div(i.n).mul(100));if(e instanceof a.Type.UnitNumber&&i instanceof a.Type.UnitNumber)return e.unit.id===i.unit.id?new a.Type.Percentage(a.Type.UnitNumber.convertToUnit(e,i.unit).n.div(i.n).mul(100)):new a.Type.Percentage(e.n.div(i.n).mul(100));if(e instanceof a.Type.Percentage){const t=e;return i.New(t.percentageValue(i.n))}throw new n.FcalError(`Expecting Percentage type in left side of percentage operation but got (${a.Type.typeVsStr[e.TYPE]}, ${a.Type.typeVsStr[i.TYPE]})`);default:return a.Type.BNumber.ZERO}}visitGroupingExpr(t){return this.evaluate(t.expression)}visitLiteralExpr(t){return t.value}visitUnaryExpr(t){const e=this.evaluate(t.right);return t.operator.type===x.TT.MINUS?e.negated():t.operator.type===x.TT.NOT?e.not():e}visitPercentageExpr(t){const e=this.evaluate(t.expression);if(e instanceof a.Type.Numeric)return a.Type.Percentage.New(e.n);throw new n.FcalError("Expecting numeric value in percentage",t.start,t.end)}evaluate(t){return t.eval(this)}checkInvalidOperation(t,e){let i;for(const r of e)if(!(r instanceof a.Type.Percentage))if(i){if(i.TYPE!==r.TYPE)switch(t){case x.TT.TIMES:case x.TT.SLASH:case x.TT.FLOOR_DIVIDE:case x.TT.MOD:case x.TT.PERCENTAGE:case x.TT.CAP:case x.TT.LESS_EQUAL_EQUAL:case x.TT.GREATER_EQUAL_EQUAL:case x.TT.EQUAL_EQUAL_EQUAL:case x.TT.NOT_EQUAL_EQUAL:continue;default:throw new n.FcalError(`Unexpected '${t}' operation between different types (${a.Type.typeVsStr[i.TYPE]}, ${a.Type.typeVsStr[r.TYPE]})`)}i instanceof a.Type.UnitNumber&&r instanceof a.Type.UnitNumber&&i.unit.id!==r.unit.id&&this.throwUnexpectedUnits(t,i.unit.id,r.unit.id)}else i=r}throwUnexpectedUnits(t,e,i){throw new n.FcalError(`Unexpected '${t}' operation between different units (${e}, ${i})`)}}})),c=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i({}),r=l({}),s=h({});e.Parser=class{constructor(t,e,n,i,r,a){this.source=t,this.lexer=new s.Lexer(this.source,e,n,i,r),this.n=0,this.tokens=[],this.c=i,this.scale=r,this.symbolTable=a}parse(){try{return this.Stmt()}catch(t){throw t instanceof n.FcalError&&(t.source=this.source),t}}getScannedTokens(){return this.tokens}Stmt(){const t=this.assignment();if(this.match([x.TT.NEWLINE]))return t;if(this.peek().type===x.TT.EOL)throw new n.FcalError("Expecting EOL",this.peek().end);throw new n.FcalError("Unexpected token "+this.peek().lexeme,this.peek().start,this.peek().end)}expression(){return this.assignment()}assignment(){const t=this.ternary();if(this.match([x.TT.EQUAL,x.TT.DOUBLE_COLON])){const e=this.assignment();if(t instanceof r.Expr.Variable){const n=t.name;return new r.Expr.Assign(n,e,t.start,e.end)}throw new n.FcalError("Expecting variable in left side of assignment",t.start,t.end)}if(this.match([x.TT.PLUS_EQUAL,x.TT.MINUS_EQUAL,x.TT.MULTIPLY_EQUAL,x.TT.DIVIDE_EQUAL,x.TT.FLOOR_DIVIDE_EQUAL,x.TT.POWER_EQUAL])){const e=this.previous(),i=this.assignment();if(t instanceof r.Expr.Variable){let n;switch(e.type){case x.TT.PLUS_EQUAL:n=x.TT.PLUS;break;case x.TT.MINUS_EQUAL:n=x.TT.MINUS;break;case x.TT.MULTIPLY_EQUAL:n=x.TT.TIMES;break;case x.TT.DIVIDE_EQUAL:n=x.TT.SLASH;break;case x.TT.FLOOR_DIVIDE_EQUAL:n=x.TT.FLOOR_DIVIDE;break;default:n=x.TT.CAP}return new r.Expr.Assign(t.name,new r.Expr.Binary(t,new x.Token(n,e.lexeme,e.literal,e.start,e.start),i,t.start,i.end))}throw new n.FcalError("Expecting variable in left side of assignment",t.start,t.end)}return t}ternary(){let t=this.logical();if(this.match([x.TT.Q])){const e=this.ternary();this.consume(x.TT.DOUBLE_COLON,"Expecting ':' in ternary operation but found "+("\n"===this.peek().type?"EOL":this.peek().type));const n=this.ternary();t=new r.Expr.Ternary(t,e,n,t.start,n.end)}return t}logical(){let t=this.equality();for(;this.match([x.TT.OR,x.TT.AND]);){const e=this.previous(),n=this.equality();t=new r.Expr.Logical(t,e,n,t.start,n.end)}return t}equality(){let t=this.comparison();for(;this.match([x.TT.EQUAL_EQUAL,x.TT.EQUAL_EQUAL_EQUAL,x.TT.NOT_EQUAL,x.TT.NOT_EQUAL_EQUAL]);){const e=this.previous(),n=this.comparison();t=new r.Expr.Binary(t,e,n,t.start,n.end)}return t}comparison(){let t=this.addition();for(;this.match([x.TT.GREATER,x.TT.GREATER_EQUAL,x.TT.GREATER_EQUAL_EQUAL,x.TT.LESS,x.TT.LESS_EQUAL,x.TT.LESS_EQUAL_EQUAL]);){const e=this.previous(),n=this.addition();t=new r.Expr.Binary(t,e,n,t.start,n.end)}return t}addition(){let t=this.multiply();for(;this.match([x.TT.PLUS,x.TT.MINUS]);){const e=this.previous(),n=this.multiply();t=new r.Expr.Binary(t,e,n,t.start,n.end)}return t}multiply(){let t=this.unitConvert();for(;this.match([x.TT.TIMES,x.TT.SLASH,x.TT.MOD,x.TT.OF,x.TT.FLOOR_DIVIDE]);){const e=this.previous(),n=this.unitConvert();t=new r.Expr.Binary(t,e,n,t.start,n.end)}return t}unitConvert(){const t=this.unary();if(this.match([x.TT.IN])){if(this.match([x.TT.UNIT])){const e=this.previous(),n=this.lexer.units.get(e.lexeme);if(n)return new r.Expr.ConversionExpr(t,n,e.lexeme,t.start,e.end)}if(this.match([x.TT.NS])){const e=this.previous(),n=U.NumberSystem.get(e.lexeme);if(n)return new r.Expr.ConversionExpr(t,n,e.lexeme,t.start,e.end)}if(this.match([x.TT.CC])){const e=this.previous(),n=this.c.get(e.lexeme);if(n)return new r.Expr.ConversionExpr(t,n,e.lexeme,t.start,e.end)}throw new n.FcalError("Expecting unit after in")}return t}unary(){if(this.match([x.TT.PLUS,x.TT.MINUS,x.TT.NOT])){const t=this.previous(),e=this.unary();return new r.Expr.Unary(t,e,t.start,e.end)}return this.exponent()}exponent(){let t=this.suffix();for(;this.match([x.TT.CAP]);){const e=this.previous(),n=this.unary();t=new r.Expr.Binary(t,e,n,t.start,n.end)}return t}suffix(){const t=this.call();if(this.match([x.TT.PERCENTAGE])){const e=this.previous();return new r.Expr.Percentage(t,t.start,e.end)}if(this.match([x.TT.UNIT])){const e=this.previous();let n;if(n=this.lexer.units.get(e.lexeme))return new r.Expr.UnitExpr(t,e.lexeme,n,t.start,e.end)}return t}call(){const t=this.term();if(this.match([x.TT.OPEN_PAREN])){if(t instanceof r.Expr.Variable){const e=Array();if(this.peek().type!==x.TT.CLOSE_PAREN)do{e.push(this.expression())}while(this.match([x.TT.COMMA]));return this.consume(x.TT.CLOSE_PAREN,"Expect ')' after the arguments"),new r.Expr.Call(t.name,e,t.start,this.previous().end)}throw new n.FcalError("Not callable",t.start,this.previous().end)}return t}term(){if(this.match([x.TT.Number])){const t=this.previous(),e=t.literal;if(this.match([x.TT.SCALE])){const n=this.previous().literal,i=this.scale.get(n);if(n)return e.n=e.n.mul(i.n),new r.Expr.Literal(e,t.start,this.previous().end)}return new r.Expr.Literal(e,t.start,t.end)}if(this.match([x.TT.OPEN_PAREN])){const t=this.previous(),e=this.expression();return this.consume(x.TT.CLOSE_PAREN,"Expect ')' after expression but found "+this.peek().lexeme),new r.Expr.Grouping(e,t.start,this.previous().end)}if(this.match([x.TT.NAME]))return new r.Expr.Variable(this.previous().lexeme,this.previous().start,this.previous().end);const t=this.peek().lexeme,e=this.symbolTable.get(t);if(e)throw new n.FcalError(`Expect expression but found ${t} [${e.toLowerCase()}]`,this.peek().start,this.peek().end);throw new n.FcalError("Expect expression but found "+("\n"===t?"EOL":t),this.peek().start,this.peek().end)}match(t){for(const e of t)if(this.check(e))return this.incr(),!0;return!1}consume(t,e){if(!this.check(t))throw new n.FcalError(e,this.peek().start,this.peek().end);this.incr()}check(t){return!this.isAtEnd()&&this.peek().type===t}isAtEnd(){return this.nextToken().type===x.TT.EOL}nextToken(){return this.n<this.tokens.length?this.tokens[this.n]:this.getToken()}getToken(){const t=this.lexer.Next();return t.type!==x.TT.EOL&&this.tokens.push(t),t}previous(){return this.tokens[this.n-1]}peek(){return this.nextToken()}incr(){this.n++}}})),h=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i({}),r=w({});class s{constructor(t,e,n,i,r){this.source=t.replace(/[ \t]+$/,""),this.start=0,this.current=0,this.tokens=Array(),this.phrases=e,this.units=n,this.cc=i,this.scale=r}static isDigit(t){return t>="0"&&t<="9"}static isAlpha(t){return!s.isDigit(t)&&!this.isSpace(t)&&"\0"!==t&&"\n"!==t&&!s.notAlpha.includes(t)}static isSpace(t){return"\t"===t||" "===t}static isBinaryDigit(t){return"0"===t||"1"===t}static isOctalDigit(t){return t>="0"&&t<="8"}static isHexDigit(t){return t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F"}Next(){return this.isAtEnd()?x.Token.EOL(this.current):this.scan()}getTokens(){const t=[];let e;for(;(e=this.Next()).type!==x.TT.EOL;)t.push(e);return t}scan(){const t=this.space();switch(t){case x.TT.PLUS:return this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.PLUS_EQUAL)):this.TT(x.TT.PLUS);case x.TT.MINUS:return this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.MINUS_EQUAL)):this.TT(x.TT.MINUS);case x.TT.TIMES:return this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.MULTIPLY_EQUAL)):this.peek(0)===x.TT.TIMES?(this.eat(),this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.POWER_EQUAL)):this.TT(x.TT.CAP)):this.TT(x.TT.TIMES);case x.TT.SLASH:return this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.DIVIDE_EQUAL)):this.peek(0)===x.TT.SLASH?(this.eat(),this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.FLOOR_DIVIDE_EQUAL)):this.TT(x.TT.FLOOR_DIVIDE)):this.TT(x.TT.SLASH);case x.TT.EQUAL:return this.peek(0)===x.TT.EQUAL?(this.eat(),this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.EQUAL_EQUAL_EQUAL)):this.TT(x.TT.EQUAL_EQUAL)):this.TT(x.TT.EQUAL);case x.TT.NOT:return this.peek(0)===x.TT.EQUAL?(this.eat(),this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.NOT_EQUAL_EQUAL)):this.TT(x.TT.NOT_EQUAL)):this.TT(x.TT.NOT);case x.TT.GREATER:return this.peek(0)===x.TT.EQUAL?(this.eat(),this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.GREATER_EQUAL_EQUAL)):this.TT(x.TT.GREATER_EQUAL)):this.TT(x.TT.GREATER);case x.TT.LESS:return this.peek(0)===x.TT.EQUAL?(this.eat(),this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.LESS_EQUAL_EQUAL)):this.TT(x.TT.LESS_EQUAL)):this.TT(x.TT.LESS);case"&":if("&"===this.peek(0))return this.eat(),this.TT(x.TT.AND);throw new n.FcalError("Unexpected character &",this.current);case"|":if("|"===this.peek(0))return this.eat(),this.TT(x.TT.OR);throw new n.FcalError("Unexpected character |",this.current);case x.TT.COMMA:return this.TT(x.TT.COMMA);case x.TT.DOUBLE_COLON:return this.TT(x.TT.DOUBLE_COLON);case x.TT.OPEN_PAREN:return this.TT(x.TT.OPEN_PAREN);case x.TT.CLOSE_PAREN:return this.TT(x.TT.CLOSE_PAREN);case x.TT.CAP:return this.peek(0)===x.TT.EQUAL?(this.eat(),this.TT(x.TT.POWER_EQUAL)):this.TT(x.TT.CAP);case x.TT.Q:return this.TT(x.TT.Q);case x.TT.PERCENTAGE:return this.TT(x.TT.PERCENTAGE);case x.TT.NEWLINE:return this.TT(x.TT.NEWLINE);default:return s.isDigit(t)?this.number():this.string()}}isAtEnd(){return this.current>=this.source.length}eat(){return this.current++,this.source.charAt(this.current-1)}peek(t){return this.current+t>=this.source.length?"\0":this.source.charAt(this.current+t)}string(){for(;s.isAlpha(this.peek(0))||s.isDigit(this.peek(0));)this.eat();const t=this.lexeme();let e;return"Infinity"===t?this.TTWithLiteral(x.TT.Number,new r.Type.BNumber(t)):(e=this.phrases.get(t))?this.TT(e):this.scale.get(t)?this.TTWithLiteral(x.TT.SCALE,t):this.units.get(t)?this.TTWithLiteral(x.TT.UNIT,t):U.NumberSystem.get(t)?this.TTWithLiteral(x.TT.NS,t):this.cc.get(t)?this.TTWithLiteral(x.TT.CC,t):this.TT(x.TT.NAME)}number(){if("0"===this.previous()&&("b"===this.peek(0)||"B"===this.peek(0))){for(this.eat();s.isDigit(this.peek(0));){if(!s.isBinaryDigit(this.peek(0)))throw new n.FcalError(`Unexpected '${this.peek(0)}' in binary number`,this.current);this.eat(),"_"===this.peek(0)&&s.isBinaryDigit(this.peek(1))&&this.eat()}const t=new r.Type.BNumber(this.lexeme().replace(/_/g,""));return t.setSystem(U.NumberSystem.bin),this.TTWithLiteral(x.TT.Number,t)}if("0"===this.previous()&&("o"===this.peek(0)||"O"===this.peek(0))){for(this.eat();s.isDigit(this.peek(0));){if(!s.isOctalDigit(this.peek(0)))throw new n.FcalError(`Unexpected '${this.peek(0)}' in Octal number`,this.current);this.eat(),"_"===this.peek(0)&&s.isOctalDigit(this.peek(1))&&this.eat()}const t=new r.Type.BNumber(this.lexeme().replace(/_/g,""));return t.setSystem(U.NumberSystem.oct),this.TTWithLiteral(x.TT.Number,t)}if("0"===this.previous()&&("x"===this.peek(0)||"X"===this.peek(0))){if(this.eat(),!s.isHexDigit(this.peek(0)))throw new n.FcalError(`Unexpected '${this.peek(0)}' in Hexadecimal`,this.current);for(;s.isHexDigit(this.peek(0));)this.eat(),"_"===this.peek(0)&&s.isHexDigit(this.peek(1))&&this.eat();const t=new r.Type.BNumber(this.lexeme().replace(/_/g,""));return t.setSystem(U.NumberSystem.hex),this.TTWithLiteral(x.TT.Number,t)}for("_"===this.peek(0)&&this.eat();s.isDigit(this.peek(0));)this.eat(),"_"===this.peek(0)&&s.isDigit(this.peek(1))&&this.eat();if("."===this.peek(0)&&s.isDigit(this.peek(1)))for(this.eat();s.isDigit(this.peek(0));)this.eat(),"_"===this.peek(0)&&s.isDigit(this.peek(1))&&this.eat();if("E"===this.peek(0)||"e"===this.peek(0)){let t=this.peek(0);if(this.eat(),"+"!==this.peek(0)&&"-"!==this.peek(0)||(t=this.peek(0),this.eat()),!s.isDigit(this.peek(0))){let e=this.peek(0);throw"\n"===e&&(e="EOL"),new n.FcalError(`Expecting number after ${t} but got '${e}'`,this.start,this.current)}for(;s.isDigit(this.peek(0));)this.eat(),"_"===this.peek(0)&&s.isDigit(this.peek(1))&&this.eat()}return this.TTWithLiteral(x.TT.Number,new r.Type.BNumber(this.lexeme().replace(/_/g,"")))}TT(t){return this.TTWithLiteral(t,null)}TTWithLiteral(t,e){const n=new x.Token(t,this.lexeme(),e,this.start,this.current);return this.start=this.current,this.tokens.push(n),n}lexeme(){return this.source.substring(this.start,this.current)}space(){let t=this.eat();for(;s.isSpace(t);)this.start=this.current,t=this.eat();return t}previous(){return this.current>0?this.source.charAt(this.current-1):"\0"}}e.Lexer=s,s.notAlpha=[x.TT.PLUS,x.TT.MINUS,x.TT.TIMES,x.TT.SLASH,x.TT.OPEN_PAREN,x.TT.CLOSE_PAREN,x.TT.CAP,x.TT.PERCENTAGE,x.TT.EQUAL,x.TT.COMMA,x.TT.DOUBLE_COLON,x.TT.NEWLINE,"&","|",x.TT.LESS,x.TT.GREATER,"!",x.TT.Q]})),l=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i({}),r=p({});class s{constructor(t,e){this.start=t,this.end=e}toString(){const t=(new r.ASTPrinter).print(this);return t.substring(0,t.length-2)}eval(t){try{return this.accept(t)}catch(e){throw e instanceof n.FcalError&&(void 0===e.start&&(e.start=this.start),void 0===e.end&&(e.end=this.end)),e}}}e.Expr=s,function(t){t.Binary=class extends t{constructor(t,e,n,i,r){super(i,r),this.left=t,this.operator=e,this.right=n}accept(t){return t.visitBinaryExpr(this)}},t.Ternary=class extends t{constructor(t,e,n,i,r){super(i,r),this.main=t,this.trueExpr=e,this.falseExpr=n}accept(t){return t.visitTernaryExpr(this)}},t.Logical=class extends t{constructor(t,e,n,i,r){super(i,r),this.left=t,this.operator=e,this.right=n}accept(t){return t.visitLogicalExpr(this)}},t.Grouping=class extends t{constructor(t,e,n){super(e,n),this.expression=t}accept(t){return t.visitGroupingExpr(this)}},t.Assign=class extends t{constructor(t,e,n,i){super(n,i),this.name=t,this.value=e}accept(t){return t.visitAssignExpr(this)}},t.Variable=class extends t{constructor(t,e,n){super(e,n),this.name=t}accept(t){return t.visitVariableExpr(this)}},t.Call=class extends t{constructor(t,e,n,i){super(n,i),this.name=t,this.argument=e}accept(t){return t.visitCallExpr(this)}},t.Literal=class extends t{constructor(t,e,n){super(e,n),this.value=t}accept(t){return t.visitLiteralExpr(this)}},t.Percentage=class extends t{constructor(t,e,n){super(e,n),this.expression=t}accept(t){return t.visitPercentageExpr(this)}},t.UnitExpr=class extends t{constructor(t,e,n,i,r){super(i,r),this.unit=n,this.phrase=e,this.expression=t}accept(t){return t.visitUnitExpr(this)}},t.ConversionExpr=class extends t{constructor(t,e,n,i,r){super(i,r),this.to=e,this.name=n,this.expression=t}accept(t){return t.visitConversionExpr(this)}},t.Unary=class extends t{constructor(t,e,n,i){super(n,i),this.operator=t,this.right=e}accept(t){return t.visitUnaryExpr(this)}}}(s||(s={})),e.Expr=s})),p=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=g({});class i{constructor(){this.depth=0}static createPrefix(t,e){return`${this.prefixChar}${"-".repeat(t*this.tab)} (${t/this.tab})${e}`}visitTernaryExpr(t){this.depth+=i.tab;const e=this.evaluate(t.main),n=this.evaluate(t.trueExpr),r=this.evaluate(t.falseExpr);return this.depth-=i.tab,`${i.createPrefix(this.depth,"TERNARY")}\n|\n${e}${n}${r}`}visitCallExpr(t){let e=`${i.createPrefix(this.depth,"FUNCTION")} ==> ${t.name} `;this.depth+=i.tab;for(const n of t.argument)e=`${e} \n|\n${this.evaluate(n)}`;return this.depth-=i.tab,e}visitAssignExpr(t){this.depth+=i.tab;const e=this.evaluate(t.value);return this.depth-=i.tab,`${i.createPrefix(this.depth,"ASSIGN")} ${t.name} \n|\n${e}`}visitVariableExpr(t){return`${i.createPrefix(this.depth,"VARIABLE")} ${t.name}\n|\n`}visitUnitExpr(t){this.depth+=i.tab;const e=this.evaluate(t.expression);return this.depth-=i.tab,`${i.createPrefix(this.depth,"UNIT")} ${t.unit.unitType} \n|\n${e}`}visitConversionExpr(t){this.depth+=i.tab;const e=this.evaluate(t.expression);return this.depth-=i.tab,t.to instanceof n.UnitMeta?`${i.createPrefix(this.depth,"UNIT CONVERT")} ${t.name} \n|\n${e}`:t.to instanceof U.NumberSystem?`${i.createPrefix(this.depth,"NUMERICAL SYSTEM")} ${t.name} \n|\n${e}`:`${i.createPrefix(this.depth,"CONVERTER")} ${t.name} \n|\n${e}`}visitLogicalExpr(t){this.depth+=i.tab;const e=this.evaluate(t.left),n=this.evaluate(t.right);return this.depth-=i.tab,`${i.createPrefix(this.depth,"LOGICAL")}  ${t.operator.type} \n|\n${e}${n}`}visitBinaryExpr(t){this.depth+=i.tab;const e=this.evaluate(t.left),n=this.evaluate(t.right);return this.depth-=i.tab,`${i.createPrefix(this.depth,"BINARY")}  ${t.operator.type} \n|\n${e}${n}`}visitGroupingExpr(t){this.depth+=i.tab;const e=this.evaluate(t.expression);return this.depth-=i.tab,`${i.createPrefix(this.depth,"GROUPING")} \n|\n${e}`}visitLiteralExpr(t){return`${i.createPrefix(this.depth,"LITERAL")} ${t.value.print()}\n|\n`}visitUnaryExpr(t){this.depth+=i.tab;const e=this.evaluate(t.right);return this.depth-=i.tab,`${i.createPrefix(this.depth,"UNARY")} ${t.operator.type} \n|\n${e}`}visitPercentageExpr(t){this.depth+=i.tab;const e=this.evaluate(t.expression);return this.depth-=i.tab,`${i.createPrefix(this.depth,"PERCENTAGE")} \n|\n${e}`}print(t){return this.evaluate(t)}evaluate(t){return t.accept(this)}}e.ASTPrinter=i,i.tab=2,i.prefixChar="+"})),f=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=g({});var i;!function(t){t.BINARY="binary",t.GROUP="group",t.LITERAL="literal",t.UNARY="unary",t.PERCENTAGE="percentage",t.UNIT="unit",t.CONVERSION="conversion",t.ASSIGN="assign",t.VARIABLE="variable",t.CALL="call",t.LOGICAL="logical",t.TERNARY="ternary"}(i||(i={})),e.JSON_TYPES=i,e.ToJSON=class{constructor(t){this.ast=t}toJSON(){const t=this.toObj();return JSON.stringify(t)}toObj(){return this.evaluate(this.ast)}visitBinaryExpr(t){const e=this.evaluate(t.right),n=this.evaluate(t.left),r=t.operator;return{type:i.BINARY,right:e,left:n,operator:r}}visitGroupingExpr(t){return{type:i.GROUP,value:this.evaluate(t.expression)}}visitLiteralExpr(t){return{type:i.LITERAL,value:t.value.print()}}visitUnaryExpr(t){return{type:i.UNARY,operator:t.operator,value:this.evaluate(t.right)}}visitPercentageExpr(t){return{type:i.PERCENTAGE,value:this.evaluate(t.expression)}}visitUnitExpr(t){return{type:i.UNIT,phrase:t.phrase,value:this.evaluate(t.expression)}}visitConversionExpr(t){const e=this.evaluate(t.expression);return t.to instanceof n.UnitMeta?{type:i.CONVERSION,unit:t.name,value:e}:t.to instanceof U.NumberSystem?{type:i.CONVERSION,ns:t.name,value:e}:{type:i.CONVERSION,converter:t.name,value:e}}visitAssignExpr(t){return{type:i.ASSIGN,variable:t.name,value:this.evaluate(t.value)}}visitVariableExpr(t){return{type:i.VARIABLE,name:t.name}}visitCallExpr(t){const e=Array();for(const n of t.argument)e.push(this.evaluate(n));return{type:i.CALL,name:t.name,args:e}}visitLogicalExpr(t){const e=this.evaluate(t.left),n=this.evaluate(t.left),r=t.operator;return{type:i.LOGICAL,right:e,left:n,operator:r}}visitTernaryExpr(t){const e=this.evaluate(t.trueExpr),n=this.evaluate(t.falseExpr),r=this.evaluate(t.main);return{type:i.TERNARY,main:r,trueExpr:e,falseExpr:n}}evaluate(t){const e=t.accept(this);return Object.assign({start:t.start,end:t.end},e)}}})),T=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i({}),r=w({}),s=N({});e.Environment=class{constructor(t,e,n){this.values=new Map,this.functions=t,this.symbolTable=e,this.constants=n,this.values.set("_",new r.Type.BNumber(0))}get(t,e,i){const r=this.values.get(t)||this.constants.get(t);if(r)return r;throw new n.FcalError("Undefined variable "+t,e,i)}set(t,e){const i=this.symbolTable.get(t);if(i&&i===s.Entity.CONSTANT)throw new n.FcalError("Can't reassign constant "+t);this.values.has(t)||this.symbolTable.set(t,s.Entity.VARIABLE),e instanceof r.Type?this.values.set(t,e):this.values.set(t,r.Type.BNumber.New(e))}use(t){if(t instanceof Map)t.forEach((t,e)=>{this.set(e,t)});else for(const e in t)if(t.hasOwnProperty(e)){const n=t[e];this.set(e,n)}}}})),E=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=N({});e.Converter=class{constructor(t){this.st=t,this.c=new Map}get(t){return this.c.get(t)}set(t,e){this.st.set(t,n.Entity.CONVERTER),this.c.set(t,e)}}})),d=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=w({}),i=N({});e.Constant=class{constructor(t){this.values=new Map,this.symbolTable=t}get(t){return this.values.get(t)}set(t,e){this.symbolTable.set(t,i.Entity.CONSTANT),e instanceof n.Type?this.values.set(t,e):this.values.set(t,n.Type.BNumber.New(e))}use(t){if(t instanceof Map)t.forEach((t,e)=>{this.set(e,t)});else for(const e in t)if(t.hasOwnProperty(e)){const n=t[e];this.set(e,n)}}}})),m=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=g({});e.getDefaultUnits=function(){const t=new Array;return function(t){t.push({id:n.Unit.LENGTH_ID,phrases:["cm","centimeter","centimeters"],plural:"Centimeters",ratio:1,singular:"Centimeter",type:"cm"},{id:n.Unit.LENGTH_ID,phrases:["m","meter","meters"],plural:"Meters",ratio:100,singular:"Meter",type:"m"},{id:n.Unit.LENGTH_ID,phrases:["mm","millimeter","millimeters"],plural:"Millimeters",ratio:.1,singular:"Millimeter",type:"mm"},{id:n.Unit.LENGTH_ID,phrases:["km","kilometer","kilometers"],plural:"Kilometers",ratio:1e5,singular:"Kilometer",type:"km"},{id:n.Unit.LENGTH_ID,phrases:["inch","inches"],plural:"Inches",ratio:2.54,singular:"Inch",type:"inch"},{id:n.Unit.LENGTH_ID,phrases:["ft","feet","foot"],plural:"Feet",ratio:30.48,singular:"Foot",type:"foot/feet"},{id:n.Unit.LENGTH_ID,phrases:["yd","yard","yards"],plural:"Yards",ratio:91.44,singular:"Yard",type:"yard"},{id:n.Unit.LENGTH_ID,phrases:["mi","mile","miles"],plural:"Miles",ratio:160934.4,singular:"Mile",type:"mile"},{id:n.Unit.LENGTH_ID,phrases:["nmi"],ratio:185200,type:"nautical mile (nmi)"})}(t),function(t){t.push({id:n.Unit.SPEED_ID,phrases:["kmh","kmph","khm","kph"],ratio:1,type:"km/h"},{id:n.Unit.SPEED_ID,phrases:["mph"],ratio:1.609344,type:"miles/h"},{id:n.Unit.SPEED_ID,phrases:["mps"],ratio:3.6,type:"m/s"},{id:n.Unit.SPEED_ID,phrases:["fps"],ratio:1.097,type:"ft/s"},{id:n.Unit.SPEED_ID,phrases:["kts","knots"],ratio:1.852,type:"kt"})}(t),function(t){t.push({id:n.Unit.TIME_ID,phrases:["nsec","nanosecond","nanoseconds"],plural:"Nanoseconds",ratio:1e-9,singular:"Nanosecond",type:"nsec"},{id:n.Unit.TIME_ID,phrases:["msec","microsecond","microseconds"],plural:"Microseconds",ratio:1e-6,singular:"Microsecond",type:"msec"},{id:n.Unit.TIME_ID,phrases:["ms","millisecond","milliseconds"],plural:"Milliseconds",ratio:.001,singular:"Millisecond",type:"ms"},{id:n.Unit.TIME_ID,phrases:["sec","second","seconds"],plural:"Seconds",ratio:1,singular:"Second",type:"second"},{id:n.Unit.TIME_ID,phrases:["minute","minutes"],plural:"Minutes",ratio:60,singular:"Minute",type:"minute"},{id:n.Unit.TIME_ID,phrases:["hr","hour","hours"],plural:"Hours",ratio:3600,singular:"Hour",type:"hour"},{id:n.Unit.TIME_ID,phrases:["day","days"],plural:"Days",ratio:86400,singular:"Day",type:"day"},{id:n.Unit.TIME_ID,phrases:["week","weeks"],plural:"Weeks",ratio:604800,singular:"Week",type:"week"})}(t),function(t){t.push({id:n.Unit.TEMPERATURE_ID,phrases:["K","kelvin"],ratio:1,type:"K"},{bias:"255.3722222222222",id:n.Unit.TEMPERATURE_ID,phrases:["\xb0F","F","fahrenheit"],ratio:"0.55555555555555555556",type:"\xb0F"},{bias:273.15,id:n.Unit.TEMPERATURE_ID,phrases:["\xb0C","C","celsius"],ratio:1,type:"\xb0C"})}(t),function(t){t.push({id:n.Unit.MASS_ID,phrases:["gram","g","grams"],ratio:1,type:"gram"},{id:n.Unit.MASS_ID,phrases:["tonne","tonnes"],ratio:1e6,type:"tonne"},{id:n.Unit.MASS_ID,phrases:["kg","kilogram","kilograms"],ratio:1e3,type:"kilogram"},{id:n.Unit.MASS_ID,phrases:["milligram","mg","milligrams"],ratio:.001,type:"milligram"},{id:n.Unit.MASS_ID,phrases:["microgram","micrograms"],ratio:1e-6,type:"microgram"},{id:n.Unit.MASS_ID,phrases:["imperialton"],ratio:"1.016e+6",type:"imperialton"},{id:n.Unit.MASS_ID,phrases:["uston"],ratio:"907185",type:"uston"},{id:n.Unit.MASS_ID,phrases:["stone","stones"],ratio:"6350.29",type:"stone"},{id:n.Unit.MASS_ID,phrases:["pound","pounds"],ratio:"453.592",type:"pound"},{id:n.Unit.MASS_ID,phrases:["ounce"],ratio:"28.3495",type:"ounce"})}(t),function(t){t.push({id:n.Unit.DIGITAL_ID,phrases:["bit"],ratio:1,type:"bit"},{id:n.Unit.DIGITAL_ID,phrases:["kilobit","kB"],ratio:1e3,type:"kilobit"},{id:n.Unit.DIGITAL_ID,phrases:["kibibit","kiB"],ratio:1024,type:"kibibit"},{id:n.Unit.DIGITAL_ID,phrases:["megabit","mB"],ratio:1e6,type:"megabit"},{id:n.Unit.DIGITAL_ID,phrases:["mebibit","miB"],ratio:"1.049e+6",type:"mebibit"},{id:n.Unit.DIGITAL_ID,phrases:["gigabit","gB"],ratio:1e9,type:"gigabit"},{id:n.Unit.DIGITAL_ID,phrases:["gibibit","giB"],ratio:"1.074e+9",type:"gibibit"},{id:n.Unit.DIGITAL_ID,phrases:["terabit","tB"],ratio:1e12,type:"terabit"},{id:n.Unit.DIGITAL_ID,phrases:["tebibit","tiB"],ratio:"1.1e+12",type:"tebibit"},{id:n.Unit.DIGITAL_ID,phrases:["petabit","pB"],ratio:1e15,type:"petabit"},{id:n.Unit.DIGITAL_ID,phrases:["pebibit","piB"],ratio:"1.126e+15",type:"pebibit"},{id:n.Unit.DIGITAL_ID,phrases:["byte","b"],ratio:8,type:"byte"},{id:n.Unit.DIGITAL_ID,phrases:["kilobyte","kb"],ratio:8e3,type:"kilobyte"},{id:n.Unit.DIGITAL_ID,phrases:["kibibyte","kib"],ratio:8192,type:"kibibyte"},{id:n.Unit.DIGITAL_ID,phrases:["megabyte","mb"],ratio:8e6,type:"megabyte"},{id:n.Unit.DIGITAL_ID,phrases:["mebibyte","mib"],ratio:"8.389e+6",type:"mebibyte"},{id:n.Unit.DIGITAL_ID,phrases:["gigabyte","gb"],ratio:8e9,type:"gigabyte"},{id:n.Unit.DIGITAL_ID,phrases:["gibibyte","gib"],ratio:"8.59e+9",type:"gibibyte"},{id:n.Unit.DIGITAL_ID,phrases:["terabyte","tb"],ratio:8e12,type:"terabyte"},{id:n.Unit.DIGITAL_ID,phrases:["tebibyte","tib"],ratio:"8.796e+12",type:"tebibyte"},{id:n.Unit.DIGITAL_ID,phrases:["petabyte","pb"],ratio:8e15,type:"petabyte"},{id:n.Unit.DIGITAL_ID,phrases:["pebibyte","pib"],ratio:"9.007e+15",type:"pebibyte"})}(t),t}})),g=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=N({});class i{constructor(t,e,n){this.id=t,this.r=e,this.b=new y.Decimal(0),this.unitType=n,this.plural=n,this.singular=n}get ratio(){if(this.r instanceof y.Decimal)return this.r;const t=this.r();return t instanceof y.Decimal?t:new y.Decimal(t)}get bias(){if(this.b instanceof y.Decimal)return this.b;const t=this.b();return t instanceof y.Decimal?t:new y.Decimal(t)}setBias(t){this.b=t}setPlural(t){this.plural=t}setSingular(t){this.singular=t}}e.UnitMeta=i;class r{constructor(t,e,n,r){this.phrases=r,e instanceof y.Decimal||"function"==typeof e?this.meta=new i(t,e,n):this.meta=new i(t,new y.Decimal(e),n)}setBias(t){return t instanceof y.Decimal||"function"==typeof t?(this.meta.setBias(t),this):(this.meta.setBias(new y.Decimal(t)),this)}Plural(t){return this.meta.setPlural(t),this}Singular(t){return this.meta.setSingular(t),this}}e.Unit=r,function(t){t.LENGTH_ID="LENGTH",t.SPEED_ID="SPEED",t.TIME_ID="TIME",t.TEMPERATURE_ID="TEMPERATURE",t.MASS_ID="MASS",t.DIGITAL_ID="DIGITAL STORAGE",t.List=class{constructor(t){this.symbolTable=t,this.units=new Map}push(t){for(const e of t.phrases)this.symbolTable.set(e,n.Entity.UNIT),this.units.set(e,t)}get(t){const e=this.units.get(t);return e?e.meta:null}}}(r||(r={})),e.Unit=r})),N=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i({});var r;e.SymbolTable=class{constructor(t){if(t)return this.registry=new Map,void(this.parent=t);this.registry=new Map,this.registry.set("bin",r.NS),this.registry.set("binary",r.NS),this.registry.set("dec",r.NS),this.registry.set("decimal",r.NS),this.registry.set("hex",r.NS),this.registry.set("hexadecimal",r.NS),this.registry.set("oct",r.NS),this.registry.set("octal",r.NS),this.registry.set("_",r.VARIABLE)}set(t,e){const i=this.get(t);if(i)throw new n.FcalError(`${t} is already used in ${i.toLowerCase()}`);this.registry.set(t,e)}get(t){var e;return this.registry.get(t)||(null===(e=this.parent)||void 0===e?void 0:e.get(t))}},function(t){t.FUNCTION="FUNCTION",t.VARIABLE="VARIABLE",t.CONSTANT="CONSTANT",t.OPERATION_PHRASE="OPERATION PHRASE",t.NS="NUMBER SYSTEM",t.UNIT="UNIT",t.CONVERTER="CONVERTER",t.SCALE="SCALE"}(r||(r={})),e.Entity=r})),v=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=w({});e.getDefaultFunctions=function(){return[{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.abs())},name:"abs"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.sqrt())},name:"sqrt"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.cbrt())},name:"cbrt"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.log())},name:"log"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.ln())},name:"ln"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.round())},name:"round"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.floor())},name:"floor"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.ceil())},name:"ceil"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.cos())},name:"cos"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.acos())},name:"acos"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.cosh())},name:"cosh"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.acosh())},name:"acosh"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.sin())},name:"sin"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.asin())},name:"asin"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.sinh())},name:"sinh"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.asinh())},name:"asinh"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.tan())},name:"tan"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.atan())},name:"atan"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.tanh())},name:"tanh"},{arity:1,func:(t,e)=>{const n=e[0];return n.New(n.n.atanh())},name:"atanh"},{arity:2,func:(t,e)=>{const n=e[0],i=e[1];return n.n=n.n.minus(1),i.n.mul(i.n.plus(1)).div(2).sub(n.n.mul(n.n.plus(1)).div(2))},name:"sigma"},{arity:-1,func:(t,e)=>{if(e.length>0){let t=e[0];for(let n=1;n<e.length;n++){const i=e[n];i.n.gt(t.n)&&(t=i)}return t}return n.Type.BNumber.New(0)},name:"max"},{arity:-1,func:(t,e)=>{if(e.length>0){let t=e[0];for(let n=1;n<e.length;n++){const i=e[n];i.n.lt(t.n)&&(t=i)}return t}return n.Type.BNumber.New(0)},name:"min"}]}})),w=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i({});var r,s;!function(t){t[t.NUMBER=0]="NUMBER",t[t.UNIT=1]="UNIT",t[t.PERCENTAGE=2]="PERCENTAGE"}(r=e.DATATYPE||(e.DATATYPE={})),function(t){t[t.PERCENTAGE=0]="PERCENTAGE",t[t.NUMBER=1]="NUMBER",t[t.UNIT=2]="UNIT"}(s=e.TYPE_RANK||(e.TYPE_RANK={}));class a{toString(){return this.print()}}e.Type=a,a.typeVsStr={0:"number",1:"unit",2:"percentage"},function(t){class e extends t{constructor(t){super(),t instanceof y.Decimal?this.n=t:this.n=new y.Decimal(t),this.ns=U.NumberSystem.dec,this.lf=!1}setSystem(t){return this.ns=t,this}toNumericString(){return this.ns.to(this.n)}print(){return this.toNumericString()}GT(t){return this.lf=!0,this.TYPE>=t.TYPE?this.gt(t):t.gt(this)}GTE(t){return this.lf=!0,this.TYPE>=t.TYPE?this.gte(t):t.gte(this)}LT(t){return this.lf=!0,this.TYPE>=t.TYPE?this.lt(t):t.lt(this)}LTE(t){return this.lf=!0,this.TYPE>=t.TYPE?this.lte(t):t.lte(this)}EQ(t){return this.lf=!0,this.TYPE>=t.TYPE?this.eq(t):t.eq(this)}NEQ(t){return this.lf=!0,this.TYPE>=t.TYPE?this.nEq(t):t.nEq(this)}Add(t){if(!this.n.isFinite()&&!t.n.isFinite()&&!(this.n.isNegative()&&t.n.isNegative()||this.n.isPositive()&&t.n.isPositive()))throw new n.FcalError("Subtraction between Infinity is indeterminate");return this.lf=!0,this.TYPE>=t.TYPE?this.TYPE_RANK<=t.TYPE_RANK?t.New(this.plus(t).n):this.plus(t):t.TYPE_RANK>=this.TYPE_RANK?t.plus(this):this.New(t.plus(this).n)}Sub(t){return this.Add(t.negated())}times(t){return this.lf=!0,this.TYPE>=t.TYPE?this.TYPE_RANK<=t.TYPE_RANK?t.New(this.mul(t).n):this.mul(t):t.TYPE_RANK>=this.TYPE_RANK?t.mul(this):this.New(t.mul(this).n)}divide(t){if(!this.n.isFinite()&&!t.n.isFinite())throw new n.FcalError("Division between Infinity is indeterminate");return this.lf=!0,this.TYPE>=t.TYPE?this.TYPE_RANK<=t.TYPE_RANK?this.TYPE_RANK===t.TYPE_RANK?this.div(t):t.New(this.div(t).n):this.div(t):t.TYPE_RANK>=this.TYPE_RANK?t.div(this):this.New(t.div(this).n)}power(t){if(this.isNegative()&&!t.n.isInt())throw new n.FcalError("Pow of operation results in complex number and complex number is not supported yet");return this.lf=!0,this.TYPE>=t.TYPE?this.TYPE_RANK<=t.TYPE_RANK?this.TYPE_RANK===t.TYPE_RANK?this.New(this.pow(t).n):t.New(this.pow(t).n):this.pow(t):t.TYPE_RANK>=this.TYPE_RANK?t.pow(this):this.New(t.pow(this).n)}modulo(e){if(!this.n.isFinite())throw new n.FcalError("Modulus with Infinity is indeterminate");return e.isZero()?new t.BNumber("Infinity"):(this.lf=!0,this.TYPE>=e.TYPE?this.TYPE_RANK<=e.TYPE_RANK?this.TYPE_RANK===e.TYPE_RANK?this.New(this.mod(e).n):e.New(this.mod(e).n):this.mod(e):e.TYPE_RANK>=this.TYPE_RANK?e.mod(this):this.New(e.mod(this).n))}toNumber(){return this.n.toNumber()}trusty(){return!this.n.isZero()}not(){return new u(this.n).not()}}t.Numeric=e;class i extends e{constructor(t){super(t),this.TYPE=r.NUMBER,this.TYPE_RANK=s.NUMBER}static New(t){return new i(t)}gt(t){return new u(this.n.gt(t.n))}gte(t){return new u(this.n.gte(t.n))}lt(t){return new u(this.n.lt(t.n))}lte(t){return new u(this.n.lte(t.n))}eq(t){return new u(this.n.eq(t.n))}nEq(t){return this.eq(t).not()}isZero(){return this.n.isZero()}isNegative(){return this.n.isNegative()}negated(){return i.New(this.n.negated())}div(t){return i.New(this.n.div(t.n))}pow(t){return i.New(this.n.pow(t.n))}mod(t){return i.New(this.n.modulo(t.n))}mul(t){return i.New(this.n.mul(t.n))}plus(t){return i.New(this.n.plus(t.n))}New(t){return i.New(t)}}i.ZERO=i.New(new y.Decimal(0)),t.BNumber=i;class a extends e{constructor(t){super(t),this.TYPE=r.PERCENTAGE,this.TYPE_RANK=s.PERCENTAGE}static New(t){return new a(t)}gt(t){return t.TYPE===r.PERCENTAGE?new u(this.n.gt(t.n)):t.lf?new u(t.n.gt(this.percentageValue(t.n))):new u(this.percentageValue(t.n).gt(t.n))}gte(t){return t.TYPE===r.PERCENTAGE?new u(this.n.gte(t.n)):t.lf?new u(t.n.gte(this.percentageValue(t.n))):new u(this.percentageValue(t.n).gte(t.n))}lt(t){return t.TYPE===r.PERCENTAGE?new u(this.n.lt(t.n)):t.lf?new u(t.n.lt(this.percentageValue(t.n))):new u(this.percentageValue(t.n).lt(t.n))}lte(t){return t.TYPE===r.PERCENTAGE?new u(this.n.lte(t.n)):t.lf?new u(t.n.lte(this.percentageValue(t.n))):new u(this.percentageValue(t.n).lte(t.n))}eq(t){return t.TYPE===r.PERCENTAGE?new u(this.n.eq(t.n)):new u(t.n.eq(this.percentageValue(t.n)))}nEq(t){return this.eq(t).not()}isZero(){return this.n.isZero()}isNegative(){return this.n.isNegative()}negated(){return a.New(this.n.negated())}plus(t){return t.TYPE===r.PERCENTAGE?a.New(this.n.plus(t.n)):a.New(t.n.plus(this.percentageValue(t.n)))}mul(t){return t.TYPE===r.PERCENTAGE?a.New(this.n.mul(t.n)):a.New(t.n.mul(this.percentageValue(t.n)))}div(t){return t.TYPE===r.PERCENTAGE?a.New(this.n.div(t.n)):t.lf?a.New(t.n.div(this.percentageValue(t.n))):a.New(this.percentageValue(t.n).div(t.n))}pow(t){return t.TYPE===r.PERCENTAGE?a.New(this.n.pow(t.n)):t.lf?a.New(t.n.pow(this.percentageValue(t.n))):a.New(this.percentageValue(t.n).pow(t.n))}mod(t){return t.TYPE===r.PERCENTAGE?a.New(this.n.mod(t.n)):t.lf?a.New(t.n.mod(this.percentageValue(t.n))):a.New(this.percentageValue(t.n).mod(t.n))}percentageValue(t){return t.mul(this.n.div(a.base))}print(){return"% "+this.toNumericString()}New(t){return a.New(t)}}a.base=new y.Decimal(100),t.Percentage=a;class o extends e{constructor(t,e){super(t),this.unit=e,this.TYPE=r.UNIT,this.TYPE_RANK=s.UNIT}static New(t,e){return new o(t,e)}static convertToUnit(t,e){if(t instanceof o){const n=t;if(n.unit.id===e.id&&n.unit.unitType!==e.unitType)return o.New(n.convert(e.ratio,e.bias),e).setSystem(t.ns)}return o.New(t.n,e).setSystem(t.ns)}New(t){return new o(t,this.unit)}isZero(){return this.n.isZero()}isNegative(){return this.n.isNegative()}negated(){return this.New(this.n.negated())}gt(t){let e,n;if([e,n]=this.lf?[this,t]:[t,this],t instanceof o){const t=e,i=n;if(t.unit.id===i.unit.id)return new u(t.convert(i.ratio(),i.bias()).gt(i.n))}return new u(e.n.gt(n.n))}gte(t){let e,n;if([e,n]=this.lf?[this,t]:[t,this],t instanceof o){const t=e,i=n;if(t.unit.id===i.unit.id)return new u(t.convert(i.ratio(),i.bias()).gte(i.n))}return new u(e.n.gte(n.n))}lt(t){let e,n;if([e,n]=this.lf?[this,t]:[t,this],t instanceof o){const t=e,i=n;if(t.unit.id===i.unit.id)return new u(t.convert(i.ratio(),i.bias()).lt(i.n))}return new u(e.n.lt(n.n))}lte(t){let e,n;if([e,n]=this.lf?[this,t]:[t,this],t instanceof o){const t=e,i=n;if(t.unit.id===i.unit.id)return new u(t.convert(i.ratio(),i.bias()).lte(i.n))}return new u(e.n.lte(n.n))}eq(t){let e,n;if([e,n]=this.lf?[this,t]:[t,this],t instanceof o){const t=e,i=n;if(t.unit.id===i.unit.id)return new u(t.convert(i.ratio(),i.bias()).eq(i.n))}return new u(e.n.eq(n.n))}nEq(t){return this.eq(t).not()}plus(t){if(t instanceof o){const e=t;return this.unit.id===t.unit.id?e.New(this.convert(e.ratio(),e.bias()).add(e.n)):t.New(this.n.plus(t.n))}return this.New(this.n.plus(t.n))}mul(t){if(t instanceof o){const e=t;return this.unit.id===t.unit.id?e.New(this.convert(e.ratio(),e.bias()).mul(e.n)):t.New(this.n.mul(t.n))}return this.New(this.n.mul(t.n))}div(e){let n,i;if([n,i]=this.lf?[this,e]:[e,this],e instanceof o){const e=n,r=i;return e.unit.unitType===r.unit.unitType?new t.BNumber(e.n.div(r.n)):e.unit.id!==r.unit.id?e.New(e.n.div(i.n)):new t.BNumber(e.n.div(r.convert(e.ratio(),e.bias())))}return this.New(n.n.div(i.n))}pow(t){let e,n;if([e,n]=this.lf?[this,t]:[t,this],t instanceof o){const t=e,i=n;return t.unit.unitType===i.unit.unitType?t.New(t.n.pow(i.n)):t.unit.id!==i.unit.id?t.New(t.n.pow(n.n)):t.New(t.n.pow(i.convert(t.ratio(),t.bias())))}return this.New(e.n.pow(n.n))}mod(t){let e,n;if([e,n]=this.lf?[this,t]:[t,this],t instanceof o){const t=e,i=n;return t.unit.id!==i.unit.id||t.unit.unitType===i.unit.unitType?t.New(t.n.mod(i.n)):t.New(t.n.mod(i.convert(t.ratio(),t.bias())))}return this.New(e.n.mod(n.n))}convert(t,e){return this.n.mul(this.ratio()).add(this.bias()).minus(e).div(t)}ratio(){return this.unit.ratio}bias(){return this.unit.bias}print(){return this.n.lessThanOrEqualTo(1)&&!this.n.isNegative()?`${this.toNumericString()} ${this.unit.singular}`:`${this.toNumericString()} ${this.unit.plural}`}}t.UnitNumber=o;class u extends i{constructor(t){if("boolean"==typeof t)return super(t?1:0),void(this.v=t);super(t),this.v=!this.n.isZero()}print(){return this.v+""}not(){return this.v?u.FALSE:u.TRUE}}u.TRUE=new u(1),u.FALSE=new u(0),t.FcalBoolean=u}(a||(a={})),e.Type=a})),y={exports:{}};!function(t){"use strict";var e,n,i,r,s=9e15,a="0123456789abcdef",o="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",u="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",c={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-s,maxE:s,crypto:!1},h=!0,l="[DecimalError] Invalid argument: ",p=Math.floor,f=Math.pow,T=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,E=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,d=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,m=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,g=1e7,N=o.length-1,v=u.length-1,w={name:"[object Decimal]"};function U(t){var e,n,i,r=t.length-1,s="",a=t[0];if(r>0){for(s+=a,e=1;e<r;e++)(n=7-(i=t[e]+"").length)&&(s+=O(n)),s+=i;(n=7-(i=(a=t[e])+"").length)&&(s+=O(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}function A(t,e,n){if(t!==~~t||t<e||t>n)throw Error(l+t)}function b(t,e,n,i){var r,s,a,o;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=7,r=0):(r=Math.ceil((e+1)/7),e%=7),s=f(10,7-e),o=t[r]%s|0,null==i?e<3?(0==e?o=o/100|0:1==e&&(o=o/10|0),a=n<4&&99999==o||n>3&&49999==o||5e4==o||0==o):a=(n<4&&o+1==s||n>3&&o+1==s/2)&&(t[r+1]/s/100|0)==f(10,e-2)-1||(o==s/2||0==o)&&0==(t[r+1]/s/100|0):e<4?(0==e?o=o/1e3|0:1==e?o=o/100|0:2==e&&(o=o/10|0),a=(i||n<4)&&9999==o||!i&&n>3&&4999==o):a=((i||n<4)&&o+1==s||!i&&n>3&&o+1==s/2)&&(t[r+1]/s/1e3|0)==f(10,e-3)-1,a}function x(t,e,n){for(var i,r,s=[0],o=0,u=t.length;o<u;){for(r=s.length;r--;)s[r]*=e;for(s[0]+=a.indexOf(t.charAt(o++)),i=0;i<s.length;i++)s[i]>n-1&&(void 0===s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}w.absoluteValue=w.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),S(t)},w.ceil=function(){return S(new this.constructor(this),this.e+1,2)},w.comparedTo=w.cmp=function(t){var e,n,i,r,s=this,a=s.d,o=(t=new s.constructor(t)).d,u=s.s,c=t.s;if(!a||!o)return u&&c?u!==c?u:a===o?0:!a^u<0?1:-1:NaN;if(!a[0]||!o[0])return a[0]?u:o[0]?-c:0;if(u!==c)return u;if(s.e!==t.e)return s.e>t.e^u<0?1:-1;for(e=0,n=(i=a.length)<(r=o.length)?i:r;e<n;++e)if(a[e]!==o[e])return a[e]>o[e]^u<0?1:-1;return i===r?0:i>r^u<0?1:-1},w.cosine=w.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(t,e){var n,i,r=e.d.length;r<32?i=(1/V(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=$(t,1,e.times(i),new t(1));for(var s=n;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}(i,K(i,n)),i.precision=t,i.rounding=e,S(2==r||3==r?n.neg():n,t,e,!0)):new i(1):new i(NaN)},w.cubeRoot=w.cbrt=function(){var t,e,n,i,r,s,a,o,u,c,l=this,T=l.constructor;if(!l.isFinite()||l.isZero())return new T(l);for(h=!1,(s=l.s*f(l.s*l,1/3))&&Math.abs(s)!=1/0?i=new T(s.toString()):(n=U(l.d),(s=((t=l.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=f(n,1/3),t=p((t+1)/3)-(t%3==(t<0?-1:2)),(i=new T(n=s==1/0?"5e"+t:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=l.s),a=(t=T.precision)+3;;)if(c=(u=(o=i).times(o).times(o)).plus(l),i=L(c.plus(l).times(o),c.plus(u),a+2,1),U(o.d).slice(0,a)===(n=U(i.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(r||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(S(i,t+1,1),e=!i.times(i).times(i).eq(l));break}if(!r&&(S(o,t+1,0),o.times(o).times(o).eq(l))){i=o;break}a+=4,r=1}return h=!0,S(i,t,T.rounding,e)},w.decimalPlaces=w.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=7*((t=e.length-1)-p(this.e/7)),t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},w.dividedBy=w.div=function(t){return L(this,new this.constructor(t))},w.dividedToIntegerBy=w.divToInt=function(t){var e=this.constructor;return S(L(this,new e(t),0,1,1),e.precision,e.rounding)},w.equals=w.eq=function(t){return 0===this.cmp(t)},w.floor=function(){return S(new this.constructor(this),this.e+1,3)},w.greaterThan=w.gt=function(t){return this.cmp(t)>0},w.greaterThanOrEqualTo=w.gte=function(t){var e=this.cmp(t);return 1==e||0===e},w.hyperbolicCosine=w.cosh=function(){var t,e,n,i,r,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;n=a.precision,i=a.rounding,a.precision=n+Math.max(s.e,s.sd())+4,a.rounding=1,(r=s.d.length)<32?e=(1/V(4,t=Math.ceil(r/3))).toString():(t=16,e="2.3283064365386962890625e-10"),s=$(a,1,s.times(e),new a(1),!0);for(var u,c=t,h=new a(8);c--;)u=s.times(s),s=o.minus(u.times(h.minus(u.times(h))));return S(s,a.precision=n,a.rounding=i,!0)},w.hyperbolicSine=w.sinh=function(){var t,e,n,i,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(r.e,r.sd())+4,s.rounding=1,(i=r.d.length)<3)r=$(s,2,r,r,!0);else{t=(t=1.4*Math.sqrt(i))>16?16:0|t,r=$(s,2,r=r.times(1/V(5,t)),r,!0);for(var a,o=new s(5),u=new s(16),c=new s(20);t--;)a=r.times(r),r=r.times(o.plus(a.times(u.times(a).plus(c))))}return s.precision=e,s.rounding=n,S(r,e,n,!0)},w.hyperbolicTangent=w.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,L(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)},w.inverseCosine=w.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),r=n.precision,s=n.rounding;return-1!==i?0===i?e.isNeg()?D(n,r,s):new n(0):new n(NaN):e.isZero()?D(n,r+4,s).times(.5):(n.precision=r+6,n.rounding=1,e=e.asin(),t=D(n,r+4,s).times(.5),n.precision=r,n.rounding=s,t.minus(e))},w.inverseHyperbolicCosine=w.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,h=!1,n=n.times(n).minus(1).sqrt().plus(n),h=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)},w.inverseHyperbolicSine=w.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,h=!1,n=n.times(n).plus(1).sqrt().plus(n),h=!0,i.precision=t,i.rounding=e,n.ln())},w.inverseHyperbolicTangent=w.atanh=function(){var t,e,n,i,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(t=s.precision,e=s.rounding,i=r.sd(),Math.max(i,t)<2*-r.e-1?S(new s(r),t,e,!0):(s.precision=n=i-r.e,r=L(r.plus(1),new s(1).minus(r),n+t,1),s.precision=t+4,s.rounding=1,r=r.ln(),s.precision=t,s.rounding=e,r.times(.5))):new s(NaN)},w.inverseSine=w.asin=function(){var t,e,n,i,r=this,s=r.constructor;return r.isZero()?new s(r):(e=r.abs().cmp(1),n=s.precision,i=s.rounding,-1!==e?0===e?((t=D(s,n+4,i).times(.5)).s=r.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=i,r.times(2)))},w.inverseTangent=w.atan=function(){var t,e,n,i,r,s,a,o,u,c=this,l=c.constructor,p=l.precision,f=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&p+4<=v)return(a=D(l,p+4,f).times(.25)).s=c.s,a}else{if(!c.s)return new l(NaN);if(p+4<=v)return(a=D(l,p+4,f).times(.5)).s=c.s,a}for(l.precision=o=p+10,l.rounding=1,t=n=Math.min(28,o/7+2|0);t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(h=!1,e=Math.ceil(o/7),i=1,u=c.times(c),a=new l(c),r=c;-1!==t;)if(r=r.times(u),s=a.minus(r.div(i+=2)),r=r.times(u),void 0!==(a=s.plus(r.div(i+=2))).d[e])for(t=e;a.d[t]===s.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),h=!0,S(a,l.precision=p,l.rounding=f,!0)},w.isFinite=function(){return!!this.d},w.isInteger=w.isInt=function(){return!!this.d&&p(this.e/7)>this.d.length-2},w.isNaN=function(){return!this.s},w.isNegative=w.isNeg=function(){return this.s<0},w.isPositive=w.isPos=function(){return this.s>0},w.isZero=function(){return!!this.d&&0===this.d[0]},w.lessThan=w.lt=function(t){return this.cmp(t)<0},w.lessThanOrEqualTo=w.lte=function(t){return this.cmp(t)<1},w.logarithm=w.log=function(t){var e,n,i,r,s,a,o,u,c=this.constructor,l=c.precision,p=c.rounding;if(null==t)t=new c(10),e=!0;else{if(n=(t=new c(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(r=n[0];r%10==0;)r/=10;s=1!==r}if(h=!1,a=B(this,o=l+5),i=e?I(c,o+10):B(t,o),b((u=L(a,i,o,1)).d,r=l,p))do{if(a=B(this,o+=10),i=e?I(c,o+10):B(t,o),u=L(a,i,o,1),!s){+U(u.d).slice(r+1,r+15)+1==1e14&&(u=S(u,l+1,0));break}}while(b(u.d,r+=10,p));return h=!0,S(u,l,p)},w.minus=w.sub=function(t){var e,n,i,r,s,a,o,u,c,l,f,T,E=this,d=E.constructor;if(t=new d(t),!E.d||!t.d)return E.s&&t.s?E.d?t.s=-t.s:t=new d(t.d||E.s!==t.s?E:NaN):t=new d(NaN),t;if(E.s!=t.s)return t.s=-t.s,E.plus(t);if(c=E.d,T=t.d,o=d.precision,u=d.rounding,!c[0]||!T[0]){if(T[0])t.s=-t.s;else{if(!c[0])return new d(3===u?-0:0);t=new d(E)}return h?S(t,o,u):t}if(n=p(t.e/7),l=p(E.e/7),c=c.slice(),s=l-n){for((f=s<0)?(e=c,s=-s,a=T.length):(e=T,n=l,a=c.length),s>(i=Math.max(Math.ceil(o/7),a)+2)&&(s=i,e.length=1),e.reverse(),i=s;i--;)e.push(0);e.reverse()}else{for((f=(i=c.length)<(a=T.length))&&(a=i),i=0;i<a;i++)if(c[i]!=T[i]){f=c[i]<T[i];break}s=0}for(f&&(e=c,c=T,T=e,t.s=-t.s),a=c.length,i=T.length-a;i>0;--i)c[a++]=0;for(i=T.length;i>s;){if(c[--i]<T[i]){for(r=i;r&&0===c[--r];)c[r]=g-1;--c[r],c[i]+=g}c[i]-=T[i]}for(;0===c[--a];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=_(c,n),h?S(t,o,u):t):new d(3===u?-0:0)},w.modulo=w.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?S(new i(n),i.precision,i.rounding):(h=!1,9==i.modulo?(e=L(n,t.abs(),0,3,1)).s*=t.s:e=L(n,t,0,i.modulo,1),e=e.times(t),h=!0,n.minus(e))},w.naturalExponential=w.exp=function(){return F(this)},w.naturalLogarithm=w.ln=function(){return B(this)},w.negated=w.neg=function(){var t=new this.constructor(this);return t.s=-t.s,S(t)},w.plus=w.add=function(t){var e,n,i,r,s,a,o,u,c,l,f=this,T=f.constructor;if(t=new T(t),!f.d||!t.d)return f.s&&t.s?f.d||(t=new T(t.d||f.s===t.s?f:NaN)):t=new T(NaN),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(c=f.d,l=t.d,o=T.precision,u=T.rounding,!c[0]||!l[0])return l[0]||(t=new T(f)),h?S(t,o,u):t;if(s=p(f.e/7),i=p(t.e/7),c=c.slice(),r=s-i){for(r<0?(n=c,r=-r,a=l.length):(n=l,i=s,a=c.length),r>(a=(s=Math.ceil(o/7))>a?s+1:a+1)&&(r=a,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for((a=c.length)-(r=l.length)<0&&(r=a,n=l,l=c,c=n),e=0;r;)e=(c[--r]=c[r]+l[r]+e)/g|0,c[r]%=g;for(e&&(c.unshift(e),++i),a=c.length;0==c[--a];)c.pop();return t.d=c,t.e=_(c,i),h?S(t,o,u):t},w.precision=w.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(l+t);return n.d?(e=R(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},w.round=function(){var t=this,e=t.constructor;return S(new e(t),t.e+1,e.rounding)},w.sine=w.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(t,e){var n,i=e.d.length;if(i<3)return $(t,2,e,e);n=(n=1.4*Math.sqrt(i))>16?16:0|n,e=$(t,2,e=e.times(1/V(5,n)),e);for(var r,s=new t(5),a=new t(16),o=new t(20);n--;)r=e.times(e),e=e.times(s.plus(r.times(a.times(r).minus(o))));return e}(i,K(i,n)),i.precision=t,i.rounding=e,S(r>2?n.neg():n,t,e,!0)):new i(NaN)},w.squareRoot=w.sqrt=function(){var t,e,n,i,r,s,a=this,o=a.d,u=a.e,c=a.s,l=a.constructor;if(1!==c||!o||!o[0])return new l(!c||c<0&&(!o||o[0])?NaN:o?a:1/0);for(h=!1,0==(c=Math.sqrt(+a))||c==1/0?(((e=U(o)).length+u)%2==0&&(e+="0"),c=Math.sqrt(e),u=p((u+1)/2)-(u<0||u%2),i=new l(e=c==1/0?"5e"+u:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+u)):i=new l(c.toString()),n=(u=l.precision)+3;;)if(i=(s=i).plus(L(a,s,n+2,1)).times(.5),U(s.d).slice(0,n)===(e=U(i.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(S(i,u+1,1),t=!i.times(i).eq(a));break}if(!r&&(S(s,u+1,0),s.times(s).eq(a))){i=s;break}n+=4,r=1}return h=!0,S(i,u,l.rounding,t)},w.tangent=w.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,(n=n.sin()).s=1,n=L(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,S(2==r||4==r?n.neg():n,t,e,!0)):new i(NaN)},w.times=w.mul=function(t){var e,n,i,r,s,a,o,u,c,l=this,f=l.constructor,T=l.d,E=(t=new f(t)).d;if(t.s*=l.s,!(T&&T[0]&&E&&E[0]))return new f(!t.s||T&&!T[0]&&!E||E&&!E[0]&&!T?NaN:T&&E?0*t.s:t.s/0);for(n=p(l.e/7)+p(t.e/7),(u=T.length)<(c=E.length)&&(s=T,T=E,E=s,a=u,u=c,c=a),s=[],i=a=u+c;i--;)s.push(0);for(i=c;--i>=0;){for(e=0,r=u+i;r>i;)o=s[r]+E[i]*T[r-i-1]+e,s[r--]=o%g|0,e=o/g|0;s[r]=(s[r]+e)%g|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=_(s,n),h?S(t,f.precision,f.rounding):t},w.toBinary=function(t,e){return H(this,2,t,e)},w.toDecimalPlaces=w.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),void 0===t?n:(A(t,0,1e9),void 0===e?e=i.rounding:A(e,0,8),S(n,t+n.e+1,e))},w.toExponential=function(t,e){var n,i=this,r=i.constructor;return void 0===t?n=P(i,!0):(A(t,0,1e9),void 0===e?e=r.rounding:A(e,0,8),n=P(i=S(new r(i),t+1,e),!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n},w.toFixed=function(t,e){var n,i,r=this,s=r.constructor;return void 0===t?n=P(r):(A(t,0,1e9),void 0===e?e=s.rounding:A(e,0,8),n=P(i=S(new s(r),t+r.e+1,e),!1,t+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},w.toFraction=function(t){var e,n,i,r,s,a,o,u,c,p,T,E,d=this,m=d.d,g=d.constructor;if(!m)return new g(d);if(c=n=new g(1),i=u=new g(0),a=(s=(e=new g(i)).e=R(m)-d.e-1)%7,e.d[0]=f(10,a<0?7+a:a),null==t)t=s>0?e:c;else{if(!(o=new g(t)).isInt()||o.lt(c))throw Error(l+o);t=o.gt(e)?s>0?e:c:o}for(h=!1,o=new g(U(m)),p=g.precision,g.precision=s=7*m.length*2;T=L(o,e,0,1,1),1!=(r=n.plus(T.times(i))).cmp(t);)n=i,i=r,r=c,c=u.plus(T.times(r)),u=r,r=e,e=o.minus(T.times(r)),o=r;return r=L(t.minus(n),i,0,1,1),u=u.plus(r.times(c)),n=n.plus(r.times(i)),u.s=c.s=d.s,E=L(c,i,s,1).minus(d).abs().cmp(L(u,n,s,1).minus(d).abs())<1?[c,i]:[u,n],g.precision=p,h=!0,E},w.toHexadecimal=w.toHex=function(t,e){return H(this,16,t,e)},w.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),null==t){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),void 0===e?e=i.rounding:A(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(h=!1,n=L(n,t,0,e,1).times(t),h=!0,S(n)):(t.s=n.s,n=t),n},w.toNumber=function(){return+this},w.toOctal=function(t,e){return H(this,8,t,e)},w.toPower=w.pow=function(t){var e,n,i,r,s,a,o=this,u=o.constructor,c=+(t=new u(t));if(!(o.d&&t.d&&o.d[0]&&t.d[0]))return new u(f(+o,c));if((o=new u(o)).eq(1))return o;if(i=u.precision,s=u.rounding,t.eq(1))return S(o,i,s);if((e=p(t.e/7))>=t.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return r=M(u,o,n,i),t.s<0?new u(1).div(r):S(r,i,s);if((a=o.s)<0){if(e<t.d.length-1)return new u(NaN);if(0==(1&t.d[e])&&(a=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=a,o}return(e=0!=(n=f(+o,c))&&isFinite(n)?new u(n+"").e:p(c*(Math.log("0."+U(o.d))/Math.LN10+o.e+1)))>u.maxE+1||e<u.minE-1?new u(e>0?a/0:0):(h=!1,u.rounding=o.s=1,n=Math.min(12,(e+"").length),(r=F(t.times(B(o,i+n)),i)).d&&b((r=S(r,i+5,1)).d,i,s)&&(e=i+10,+U((r=S(F(t.times(B(o,e+n)),e),e+5,1)).d).slice(i+1,i+15)+1==1e14&&(r=S(r,i+1,0))),r.s=a,h=!0,u.rounding=s,S(r,i,s))},w.toPrecision=function(t,e){var n,i=this,r=i.constructor;return void 0===t?n=P(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(A(t,1,1e9),void 0===e?e=r.rounding:A(e,0,8),n=P(i=S(new r(i),t,e),t<=i.e||i.e<=r.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n},w.toSignificantDigits=w.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(A(t,1,1e9),void 0===e?e=n.rounding:A(e,0,8)),S(new n(this),t,e)},w.toString=function(){var t=this,e=t.constructor,n=P(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},w.truncated=w.trunc=function(){return S(new this.constructor(this),this.e+1,1)},w.valueOf=w.toJSON=function(){var t=this,e=t.constructor,n=P(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var L=function(){function t(t,e,n){var i,r=0,s=t.length;for(t=t.slice();s--;)i=t[s]*e+r,t[s]=i%n|0,r=i/n|0;return r&&t.unshift(r),t}function e(t,e,n,i){var r,s;if(n!=i)s=n>i?1:-1;else for(r=s=0;r<n;r++)if(t[r]!=e[r]){s=t[r]>e[r]?1:-1;break}return s}function i(t,e,n,i){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*i+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,s,a,o,u,c){var h,l,f,T,E,d,m,N,v,w,y,U,A,b,x,L,P,_,I,D,R=r.constructor,O=r.s==s.s?1:-1,M=r.d,k=s.d;if(!(M&&M[0]&&k&&k[0]))return new R(r.s&&s.s&&(M?!k||M[0]!=k[0]:k)?M&&0==M[0]||!k?0*O:O/0:NaN);for(c?(E=1,l=r.e-s.e):(c=g,E=7,l=p(r.e/E)-p(s.e/E)),I=k.length,P=M.length,w=(v=new R(O)).d=[],f=0;k[f]==(M[f]||0);f++);if(k[f]>(M[f]||0)&&l--,null==a?(b=a=R.precision,o=R.rounding):b=u?a+(r.e-s.e)+1:a,b<0)w.push(1),d=!0;else{if(b=b/E+2|0,f=0,1==I){for(T=0,k=k[0],b++;(f<P||T)&&b--;f++)x=T*c+(M[f]||0),w[f]=x/k|0,T=x%k|0;d=T||f<P}else{for((T=c/(k[0]+1)|0)>1&&(k=t(k,T,c),M=t(M,T,c),I=k.length,P=M.length),L=I,U=(y=M.slice(0,I)).length;U<I;)y[U++]=0;(D=k.slice()).unshift(0),_=k[0],k[1]>=c/2&&++_;do{T=0,(h=e(k,y,I,U))<0?(A=y[0],I!=U&&(A=A*c+(y[1]||0)),(T=A/_|0)>1?(T>=c&&(T=c-1),1==(h=e(m=t(k,T,c),y,N=m.length,U=y.length))&&(T--,i(m,I<N?D:k,N,c))):(0==T&&(h=T=1),m=k.slice()),(N=m.length)<U&&m.unshift(0),i(y,m,U,c),-1==h&&(h=e(k,y,I,U=y.length))<1&&(T++,i(y,I<U?D:k,U,c)),U=y.length):0===h&&(T++,y=[0]),w[f++]=T,h&&y[0]?y[U++]=M[L]||0:(y=[M[L]],U=1)}while((L++<P||void 0!==y[0])&&b--);d=void 0!==y[0]}w[0]||w.shift()}if(1==E)v.e=l,n=d;else{for(f=1,T=w[0];T>=10;T/=10)f++;v.e=f+l*E-1,S(v,u?a+v.e+1:a,o,d)}return v}}();function S(t,e,n,i){var r,s,a,o,u,c,l,p,T,E=t.constructor;t:if(null!=e){if(!(p=t.d))return t;for(r=1,o=p[0];o>=10;o/=10)r++;if((s=e-r)<0)s+=7,a=e,u=(l=p[T=0])/f(10,r-a-1)%10|0;else if((T=Math.ceil((s+1)/7))>=(o=p.length)){if(!i)break t;for(;o++<=T;)p.push(0);l=u=0,r=1,a=(s%=7)-7+1}else{for(l=o=p[T],r=1;o>=10;o/=10)r++;u=(a=(s%=7)-7+r)<0?0:l/f(10,r-a-1)%10|0}if(i=i||e<0||void 0!==p[T+1]||(a<0?l:l%f(10,r-a-1)),c=n<4?(u||i)&&(0==n||n==(t.s<0?3:2)):u>5||5==u&&(4==n||i||6==n&&(s>0?a>0?l/f(10,r-a):0:p[T-1])%10&1||n==(t.s<0?8:7)),e<1||!p[0])return p.length=0,c?(e-=t.e+1,p[0]=f(10,(7-e%7)%7),t.e=-e||0):p[0]=t.e=0,t;if(0==s?(p.length=T,o=1,T--):(p.length=T+1,o=f(10,7-s),p[T]=a>0?(l/f(10,r-a)%f(10,a)|0)*o:0),c)for(;;){if(0==T){for(s=1,a=p[0];a>=10;a/=10)s++;for(a=p[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(t.e++,p[0]==g&&(p[0]=1));break}if(p[T]+=o,p[T]!=g)break;p[T--]=0,o=1}for(s=p.length;0===p[--s];)p.pop()}return h&&(t.e>E.maxE?(t.d=null,t.e=NaN):t.e<E.minE&&(t.e=0,t.d=[0])),t}function P(t,e,n){if(!t.isFinite())return Q(t);var i,r=t.e,s=U(t.d),a=s.length;return e?(n&&(i=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+O(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):r<0?(s="0."+O(-r-1)+s,n&&(i=n-a)>0&&(s+=O(i))):r>=a?(s+=O(r+1-a),n&&(i=n-r-1)>0&&(s=s+"."+O(i))):((i=r+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(s+="."),s+=O(i))),s}function _(t,e){var n=t[0];for(e*=7;n>=10;n/=10)e++;return e}function I(t,e,n){if(e>N)throw h=!0,n&&(t.precision=n),Error("[DecimalError] Precision limit exceeded");return S(new t(o),e,1,!0)}function D(t,e,n){if(e>v)throw Error("[DecimalError] Precision limit exceeded");return S(new t(u),e,n,!0)}function R(t){var e=t.length-1,n=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function O(t){for(var e="";t--;)e+="0";return e}function M(t,e,n,i){var r,s=new t(1),a=Math.ceil(i/7+4);for(h=!1;;){if(n%2&&q((s=s.times(e)).d,a)&&(r=!0),0===(n=p(n/2))){n=s.d.length-1,r&&0===s.d[n]&&++s.d[n];break}q((e=e.times(e)).d,a)}return h=!0,s}function k(t){return 1&t.d[t.d.length-1]}function C(t,e,n){for(var i,r=new t(e[0]),s=0;++s<e.length;){if(!(i=new t(e[s])).s){r=i;break}r[n](i)&&(r=i)}return r}function F(t,e){var n,i,r,s,a,o,u,c=0,l=0,p=0,T=t.constructor,E=T.rounding,d=T.precision;if(!t.d||!t.d[0]||t.e>17)return new T(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(h=!1,u=d):u=e,o=new T(.03125);t.e>-2;)t=t.times(o),p+=5;for(u+=i=Math.log(f(2,p))/Math.LN10*2+5|0,n=s=a=new T(1),T.precision=u;;){if(s=S(s.times(t),u,1),n=n.times(++l),U((o=a.plus(L(s,n,u,1))).d).slice(0,u)===U(a.d).slice(0,u)){for(r=p;r--;)a=S(a.times(a),u,1);if(null!=e)return T.precision=d,a;if(!(c<3&&b(a.d,u-i,E,c)))return S(a,T.precision=d,E,h=!0);T.precision=u+=10,n=s=o=new T(1),l=0,c++}a=o}}function B(t,e){var n,i,r,s,a,o,u,c,l,p,f,T=1,E=t,d=E.d,m=E.constructor,g=m.rounding,N=m.precision;if(E.s<0||!d||!d[0]||!E.e&&1==d[0]&&1==d.length)return new m(d&&!d[0]?-1/0:1!=E.s?NaN:d?0:E);if(null==e?(h=!1,l=N):l=e,m.precision=l+=10,i=(n=U(d)).charAt(0),!(Math.abs(s=E.e)<15e14))return c=I(m,l+2,N).times(s+""),E=B(new m(i+"."+n.slice(1)),l-10).plus(c),m.precision=N,null==e?S(E,N,g,h=!0):E;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=U((E=E.times(t)).d)).charAt(0),T++;for(s=E.e,i>1?(E=new m("0."+n),s++):E=new m(i+"."+n.slice(1)),p=E,u=a=E=L(E.minus(1),E.plus(1),l,1),f=S(E.times(E),l,1),r=3;;){if(a=S(a.times(f),l,1),U((c=u.plus(L(a,new m(r),l,1))).d).slice(0,l)===U(u.d).slice(0,l)){if(u=u.times(2),0!==s&&(u=u.plus(I(m,l+2,N).times(s+""))),u=L(u,new m(T),l,1),null!=e)return m.precision=N,u;if(!b(u.d,l-10,g,o))return S(u,m.precision=N,g,h=!0);m.precision=l+=10,c=a=E=L(p.minus(1),p.plus(1),l,1),f=S(E.times(E),l,1),r=o=1}u=c,r+=2}}function Q(t){return String(t.s*t.s/0)}function Y(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;48===e.charCodeAt(i);i++);for(r=e.length;48===e.charCodeAt(r-1);--r);if(e=e.slice(i,r)){if(r-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%7,n<0&&(i+=7),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=7;i<r;)t.d.push(+e.slice(i,i+=7));i=7-(e=e.slice(i)).length}else i-=r;for(;i--;)e+="0";t.d.push(+e),h&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function G(t,n){var i,r,s,a,o,u,c,p,m;if("Infinity"===n||"NaN"===n)return+n||(t.s=NaN),t.e=NaN,t.d=null,t;if(E.test(n))i=16,n=n.toLowerCase();else if(T.test(n))i=2;else{if(!d.test(n))throw Error(l+n);i=8}for((a=n.search(/p/i))>0?(c=+n.slice(a+1),n=n.substring(2,a)):n=n.slice(2),o=(a=n.indexOf("."))>=0,r=t.constructor,o&&(a=(u=(n=n.replace(".","")).length)-a,s=M(r,new r(i),a,2*a)),a=m=(p=x(n,i,g)).length-1;0===p[a];--a)p.pop();return a<0?new r(0*t.s):(t.e=_(p,m),t.d=p,h=!1,o&&(t=L(t,s,4*u)),c&&(t=t.times(Math.abs(c)<54?f(2,c):e.pow(2,c))),h=!0,t)}function $(t,e,n,i,r){var s,a,o,u,c=t.precision,l=Math.ceil(c/7);for(h=!1,u=n.times(n),o=new t(i);;){if(a=L(o.times(u),new t(e++*e++),c,1),o=r?i.plus(a):i.minus(a),i=L(a.times(u),new t(e++*e++),c,1),void 0!==(a=o.plus(i)).d[l]){for(s=l;a.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=i,i=a,a=s}return h=!0,a.d.length=l+1,a}function V(t,e){for(var n=t;--e;)n*=t;return n}function K(t,e){var n,i=e.s<0,s=D(t,t.precision,1),a=s.times(.5);if((e=e.abs()).lte(a))return r=i?4:1,e;if((n=e.divToInt(s)).isZero())r=i?3:2;else{if((e=e.minus(n.times(s))).lte(a))return r=k(n)?i?2:3:i?4:1,e;r=k(n)?i?1:4:i?3:2}return e.minus(s).abs()}function H(t,e,i,r){var s,o,u,c,h,l,p,f,T,E=t.constructor,d=void 0!==i;if(d?(A(i,1,1e9),void 0===r?r=E.rounding:A(r,0,8)):(i=E.precision,r=E.rounding),t.isFinite()){for(d?(s=2,16==e?i=4*i-3:8==e&&(i=3*i-2)):s=e,(u=(p=P(t)).indexOf("."))>=0&&(p=p.replace(".",""),(T=new E(1)).e=p.length-u,T.d=x(P(T),10,s),T.e=T.d.length),o=h=(f=x(p,10,s)).length;0==f[--h];)f.pop();if(f[0]){if(u<0?o--:((t=new E(t)).d=f,t.e=o,f=(t=L(t,T,i,r,0,s)).d,o=t.e,l=n),u=f[i],c=s/2,l=l||void 0!==f[i+1],l=r<4?(void 0!==u||l)&&(0===r||r===(t.s<0?3:2)):u>c||u===c&&(4===r||l||6===r&&1&f[i-1]||r===(t.s<0?8:7)),f.length=i,l)for(;++f[--i]>s-1;)f[i]=0,i||(++o,f.unshift(1));for(h=f.length;!f[h-1];--h);for(u=0,p="";u<h;u++)p+=a.charAt(f[u]);if(d){if(h>1)if(16==e||8==e){for(u=16==e?4:3,--h;h%u;h++)p+="0";for(h=(f=x(p,s,e)).length;!f[h-1];--h);for(u=1,p="1.";u<h;u++)p+=a.charAt(f[u])}else p=p.charAt(0)+"."+p.slice(1);p=p+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)p="0"+p;p="0."+p}else if(++o>h)for(o-=h;o--;)p+="0";else o<h&&(p=p.slice(0,o)+"."+p.slice(o))}else p=d?"0p+0":"0";p=(16==e?"0x":2==e?"0b":8==e?"0o":"")+p}else p=Q(t);return t.s<0?"-"+p:p}function q(t,e){if(t.length>e)return t.length=e,!0}function j(t){return new this(t).abs()}function Z(t){return new this(t).acos()}function J(t){return new this(t).acosh()}function W(t,e){return new this(t).plus(e)}function X(t){return new this(t).asin()}function z(t){return new this(t).asinh()}function tt(t){return new this(t).atan()}function et(t){return new this(t).atanh()}function nt(t,e){t=new this(t),e=new this(e);var n,i=this.precision,r=this.rounding,s=i+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?D(this,i,r):new this(0)).s=t.s:!t.d||e.isZero()?(n=D(this,s,1).times(.5)).s=t.s:e.s<0?(this.precision=s,this.rounding=1,n=this.atan(L(t,e,s,1)),e=D(this,s,1),this.precision=i,this.rounding=r,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(L(t,e,s,1)):(n=D(this,s,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function it(t){return new this(t).cbrt()}function rt(t){return S(t=new this(t),t.e+1,2)}function st(t){if(!t||"object"!=typeof t)throw Error("[DecimalError] Object expected");var e,n,i,r=!0===t.defaults,a=["precision",1,1e9,"rounding",0,8,"toExpNeg",-s,0,"toExpPos",0,s,"maxE",0,s,"minE",-s,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],r&&(this[n]=c[n]),void 0!==(i=t[n])){if(!(p(i)===i&&i>=a[e+1]&&i<=a[e+2]))throw Error(l+n+": "+i);this[n]=i}if(n="crypto",r&&(this[n]=c[n]),void 0!==(i=t[n])){if(!0!==i&&!1!==i&&0!==i&&1!==i)throw Error(l+n+": "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");this[n]=!0}else this[n]=!1}return this}function at(t){return new this(t).cos()}function ot(t){return new this(t).cosh()}function ut(t,e){return new this(t).div(e)}function ct(t){return new this(t).exp()}function ht(t){return S(t=new this(t),t.e+1,3)}function lt(){var t,e,n=new this(0);for(h=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return h=!0,new this(1/0);n=e}return h=!0,n.sqrt()}function pt(t){return t instanceof e||t&&"[object Decimal]"===t.name||!1}function ft(t){return new this(t).ln()}function Tt(t,e){return new this(t).log(e)}function Et(t){return new this(t).log(2)}function dt(t){return new this(t).log(10)}function mt(){return C(this,arguments,"lt")}function gt(){return C(this,arguments,"gt")}function Nt(t,e){return new this(t).mod(e)}function vt(t,e){return new this(t).mul(e)}function wt(t,e){return new this(t).pow(e)}function yt(t){var e,n,i,r,s=0,a=new this(1),o=[];if(void 0===t?t=this.precision:A(t,1,1e9),i=Math.ceil(t/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));s<i;)(r=e[s])>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=r%1e7;else{if(!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");for(e=crypto.randomBytes(i*=4);s<i;)(r=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((127&e[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(r%1e7),s+=4);s=i/4}else for(;s<i;)o[s++]=1e7*Math.random()|0;for(t%=7,(i=o[--s])&&t&&(r=f(10,7-t),o[s]=(i/r|0)*r);0===o[s];s--)o.pop();if(s<0)n=0,o=[0];else{for(n=-1;0===o[0];n-=7)o.shift();for(i=1,r=o[0];r>=10;r/=10)i++;i<7&&(n-=7-i)}return a.e=n,a.d=o,a}function Ut(t){return S(t=new this(t),t.e+1,this.rounding)}function At(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function bt(t){return new this(t).sin()}function xt(t){return new this(t).sinh()}function Lt(t){return new this(t).sqrt()}function St(t,e){return new this(t).sub(e)}function Pt(t){return new this(t).tan()}function _t(t){return new this(t).tanh()}function It(t){return S(t=new this(t),t.e+1,1)}(e=function t(e){var n,i,r;function s(t){var e,n,i,r=this;if(!(r instanceof s))return new s(t);if(r.constructor=s,t instanceof s)return r.s=t.s,void(h?!t.d||t.e>s.maxE?(r.e=NaN,r.d=null):t.e<s.minE?(r.e=0,r.d=[0]):(r.e=t.e,r.d=t.d.slice()):(r.e=t.e,r.d=t.d?t.d.slice():t.d));if("number"==(i=typeof t)){if(0===t)return r.s=1/t<0?-1:1,r.e=0,void(r.d=[0]);if(t<0?(t=-t,r.s=-1):r.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(h?e>s.maxE?(r.e=NaN,r.d=null):e<s.minE?(r.e=0,r.d=[0]):(r.e=e,r.d=[t]):(r.e=e,r.d=[t]))}return 0*t!=0?(t||(r.s=NaN),r.e=NaN,void(r.d=null)):Y(r,t.toString())}if("string"!==i)throw Error(l+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),r.s=-1):(43===n&&(t=t.slice(1)),r.s=1),m.test(t)?Y(r,t):G(r,t)}if(s.prototype=w,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=st,s.clone=t,s.isDecimal=pt,s.abs=j,s.acos=Z,s.acosh=J,s.add=W,s.asin=X,s.asinh=z,s.atan=tt,s.atanh=et,s.atan2=nt,s.cbrt=it,s.ceil=rt,s.cos=at,s.cosh=ot,s.div=ut,s.exp=ct,s.floor=ht,s.hypot=lt,s.ln=ft,s.log=Tt,s.log10=dt,s.log2=Et,s.max=mt,s.min=gt,s.mod=Nt,s.mul=vt,s.pow=wt,s.random=yt,s.round=Ut,s.sign=At,s.sin=bt,s.sinh=xt,s.sqrt=Lt,s.sub=St,s.tan=Pt,s.tanh=_t,s.trunc=It,void 0===e&&(e={}),e&&!0!==e.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)e.hasOwnProperty(i=r[n++])||(e[i]=this[i]);return s.config(e),s}(c)).default=e.Decimal=e,o=new e(o),u=new e(u),"function"==typeof define&&define.amd?define((function(){return e})):y.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(w[Symbol.for("nodejs.util.inspect.custom")]=w.toString,w[Symbol.toStringTag]="Decimal"),y.exports=e):(t||(t="undefined"!=typeof self&&self&&self.self==self?self:window),i=t.Decimal,e.noConflict=function(){return t.Decimal=i,e},t.Decimal=e)}(this),y=y.exports;var U={};Object.defineProperty(U,"__esModule",{value:!0});class A{constructor(t,e){this.to=e,this.name=t}static get(t){return A.ns[t]}}U.NumberSystem=A,A.dec=new A("Decimal",t=>t.add(0).toString()),A.hex=new A("HexaDecimal",t=>t.toHexadecimal()),A.bin=new A("Binary",t=>t.toBinary()),A.oct=new A("Octal",t=>t.toOctal()),A.ns={bin:A.bin,binary:A.bin,dec:A.dec,decimal:A.dec,hex:A.hex,hexadecimal:A.hex,oct:A.oct,octal:A.oct};var b,x={};Object.defineProperty(x,"__esModule",{value:!0}),function(t){t.PLUS="+",t.MINUS="-",t.TIMES="*",t.MOD="mod",t.SLASH="/",t.Number="number",t.OPEN_PAREN="(",t.CLOSE_PAREN=")",t.NEWLINE="\n",t.EOL="EOL",t.IN="in",t.NAME="name",t.EQUAL="=",t.COMMA=",",t.PERCENTAGE="%",t.OF="of",t.UNIT="unit",t.CAP="^",t.NS="ns",t.DOUBLE_COLON=":",t.FLOOR_DIVIDE="//",t.LESS_EQUAL="<=",t.GREATER_EQUAL=">=",t.LESS_EQUAL_EQUAL="<==",t.GREATER_EQUAL_EQUAL=">==",t.LESS="<",t.GREATER=">",t.EQUAL_EQUAL="==",t.EQUAL_EQUAL_EQUAL="===",t.NOT_EQUAL="!=",t.NOT_EQUAL_EQUAL="!==",t.NOT="!",t.AND="&&",t.OR="||",t.Q="?",t.CC="cc",t.PLUS_EQUAL="+=",t.MINUS_EQUAL="-=",t.DIVIDE_EQUAL="/=",t.FLOOR_DIVIDE_EQUAL="//=",t.MULTIPLY_EQUAL="*=",t.POWER_EQUAL="^=",t.SCALE="scale"}(b||(b={})),x.TT=b;class L{constructor(t,e,n,i,r){this.type=t,this.lexeme=e,this.start=i,this.end=r,this.literal=n}static EOL(t){return new L(b.EOL,"EOL",null,t,t)}}x.Token=L;var S={};Object.defineProperty(S,"__esModule",{value:!0}),S.noOfHrToExpireER=S.ERUrl=S.exampleOffKey=S.localStorageKeyER=S.localStorageKeyExpr=void 0,S.localStorageKeyExpr="fcal-gui-expression",S.localStorageKeyER="fcal-gui-ER",S.exampleOffKey="fcal-gui-example-off",S.ERUrl="https://api.exchangeratesapi.io/latest?base=USD",S.noOfHrToExpireER=6;var P={};function _(){return new Promise((function(t,e){var n=new XMLHttpRequest;n.open("GET",S.ERUrl),n.onload=function(){200==n.status?(localStorage.setItem(S.localStorageKeyER,JSON.stringify({date:Date.now(),ER:JSON.parse(n.response)})),t(JSON.parse(n.response))):e(new Error(n.statusText))},n.onerror=function(){return e(new Error(n.statusText))},n.send()}))}Object.defineProperty(P,"__esModule",{value:!0}),P.getER=void 0,P.getER=function(){var t=function(){var t=localStorage.getItem(S.localStorageKeyER);return t?JSON.parse(t):null}();return t?Date.now()>1e3*t.timestamp*60*60*S.noOfHrToExpireER?(console.info("Rates got expired: "+new Date(t.timestamp)),_()):t.ER:_()},e()}();